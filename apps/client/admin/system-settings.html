<!DOCTYPE html>
<html lang="en" class="admin-page">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Settings & Configuration | Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="admin-auth-check.js"></script>
    <script src="admin-utils.js"></script>
    <style>
        :root {
            --primary-color: #080b3b;
            --secondary-color: #1e40af;
            --accent-color: #3b82f6;
        }
        
        .glass-morphism {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .gradient-bg {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        }
        .sidebar {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        .nav-item {
            transition: all 0.3s ease;
        }
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        .nav-item.active {
            background: rgba(255, 255, 255, 0.2);
            border-left: 3px solid #3b82f6;
        }
        .form-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            transition: all 0.3s ease;
        }
        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        .form-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }
        .setting-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .setting-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            transition: 0.4s;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            border-radius: 50%;
            transition: 0.4s;
        }
        input:checked + .toggle-slider {
            background-color: #3b82f6;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        .tab-btn {
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .tab-btn.active {
            background: rgba(59, 130, 246, 0.2);
            border-color: var(--accent-color);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .config-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        .config-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin-bottom: 0.75rem;
            transition: all 0.3s ease;
        }
        .config-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        .status-online { background-color: #22c55e; animation: pulse 2s infinite; }
        .status-offline { background-color: #ef4444; }
        .status-warning { background-color: #f59e0b; animation: pulse 2s infinite; }
        .status-maintenance { background-color: #6b7280; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .advanced-setting {
            border-left: 4px solid var(--accent-color);
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(16, 185, 129, 0.1));
        }
        .critical-setting {
            border-left: 4px solid #ef4444;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(245, 158, 11, 0.1));
        }
        .performance-metric {
            text-align: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #3b82f6;
            margin-bottom: 0.5rem;
        }
        .metric-label {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .alert-banner {
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid;
        }
        .alert-info {
            background: rgba(59, 130, 246, 0.1);
            border-left-color: #3b82f6;
            color: #93c5fd;
        }
        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            border-left-color: #f59e0b;
            color: #fbbf24;
        }
        .alert-success {
            background: rgba(34, 197, 94, 0.1);
            border-left-color: #22c55e;
            color: #86efac;
        }
        .alert-error {
            background: rgba(239, 68, 68, 0.1);
            border-left-color: #ef4444;
            color: #fca5a5;
        }
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: inherit;
        }
        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid #3b82f6;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .maintenance-mode {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(245, 158, 11, 0.2));
            border: 2px solid #ef4444;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            margin-bottom: 2rem;
        }
        .backup-status {
            display: flex;
            align-items: center;
            space-x: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }
        .backup-success {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }
        .backup-pending {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }
        .backup-failed {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }
    </style>
</head>

<body class="gradient-bg min-h-screen">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <div class="sidebar w-64 lg:w-80 flex-shrink-0 hidden md:flex flex-col">
            <div class="p-6 border-b border-white/10">
                <h2 class="text-xl font-bold text-white">Admin Panel</h2>
            </div>
            
            <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
                <a href="dashboard.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <!-- Previous nav items abbreviated for brevity -->
                <a href="system-settings.html" class="nav-item active flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-cogs"></i>
                    <span>System Settings</span>
                </a>
                <a href="settings.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-cog"></i>
                    <span>General Settings</span>
                </a>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 p-4 sm:p-6 lg:p-8 overflow-auto">
            
            <!-- Header -->
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 space-y-4 sm:space-y-0">
                <div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-white mb-2 flex items-center">
                        System Settings & Configuration
                        <span class="status-indicator status-online ml-3"></span>
                    </h1>
                    <p class="text-white/70">Advanced system configuration and global settings management</p>
                </div>
                <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                    <button onclick="saveAllSettings()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition text-sm">
                        <i class="fas fa-save mr-2"></i>Save All
                    </button>
                    <button onclick="resetDefaults()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg transition text-sm">
                        <i class="fas fa-undo mr-2"></i>Reset Defaults
                    </button>
                    <button onclick="exportConfig()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition text-sm">
                        <i class="fas fa-download mr-2"></i>Export Config
                    </button>
                </div>
            </div>

            <!-- System Status Overview -->
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-4 sm:gap-6 mb-6">
                <div class="performance-metric">
                    <div class="metric-value" id="system-uptime">99.8%</div>
                    <div class="metric-label">System Uptime</div>
                </div>
                
                <div class="performance-metric">
                    <div class="metric-value" id="memory-usage">68%</div>
                    <div class="metric-label">Memory Usage</div>
                </div>
                
                <div class="performance-metric">
                    <div class="metric-value" id="disk-usage">42%</div>
                    <div class="metric-label">Disk Usage</div>
                </div>
                
                <div class="performance-metric">
                    <div class="metric-value" id="cpu-load">15%</div>
                    <div class="metric-label">CPU Load</div>
                </div>
                
                <div class="performance-metric">
                    <div class="metric-value" id="active-users">1,847</div>
                    <div class="metric-label">Active Users</div>
                </div>
            </div>

            <!-- Maintenance Mode Alert (if active) -->
            <div id="maintenance-alert" class="maintenance-mode hidden">
                <div class="flex items-center justify-center space-x-3 mb-3">
                    <i class="fas fa-exclamation-triangle text-red-400 text-2xl"></i>
                    <h3 class="text-white text-xl font-bold">Maintenance Mode Active</h3>
                </div>
                <p class="text-white/80 mb-4">System is currently in maintenance mode. New users cannot access the platform.</p>
                <button onclick="disableMaintenanceMode()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg">
                    <i class="fas fa-toggle-off mr-2"></i>Disable Maintenance Mode
                </button>
            </div>

            <!-- System Alerts -->
            <div id="system-alerts" class="mb-6">
                <!-- Dynamic alerts will be populated here -->
            </div>

            <!-- Tab Navigation -->
            <div class="flex flex-wrap gap-2 mb-6">
                <div class="tab-btn active" data-tab="general" onclick="switchTab('general')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-sliders-h"></i>
                        <span class="text-white font-medium">General</span>
                    </div>
                </div>
                <div class="tab-btn" data-tab="performance" onclick="switchTab('performance')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-tachometer-alt"></i>
                        <span class="text-white font-medium">Performance</span>
                    </div>
                </div>
                <div class="tab-btn" data-tab="security" onclick="switchTab('security')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-shield-alt"></i>
                        <span class="text-white font-medium">Security</span>
                    </div>
                </div>
                <div class="tab-btn" data-tab="email" onclick="switchTab('email')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-envelope"></i>
                        <span class="text-white font-medium">Email</span>
                    </div>
                </div>
                <div class="tab-btn" data-tab="storage" onclick="switchTab('storage')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-database"></i>
                        <span class="text-white font-medium">Storage</span>
                    </div>
                </div>
                <div class="tab-btn" data-tab="integrations" onclick="switchTab('integrations')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-plug"></i>
                        <span class="text-white font-medium">Integrations</span>
                    </div>
                </div>
                <div class="tab-btn" data-tab="advanced" onclick="switchTab('advanced')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-code"></i>
                        <span class="text-white font-medium">Advanced</span>
                    </div>
                </div>
            </div>

            <!-- Tab Contents -->

            <!-- General Settings Tab -->
            <div id="general-tab" class="tab-content active">
                <div class="config-grid">
                    
                    <!-- Site Information -->
                    <div class="config-section">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                            <i class="fas fa-info-circle text-blue-400 mr-2"></i>
                            Site Information
                        </h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-white/70 text-sm mb-2">Site Name</label>
                                <input type="text" id="site-name" value="African Deals Platform" 
                                       class="w-full p-3 rounded-lg form-input">
                            </div>
                            
                            <div>
                                <label class="block text-white/70 text-sm mb-2">Site Description</label>
                                <textarea id="site-description" rows="3" 
                                          class="w-full p-3 rounded-lg form-input resize-none"
                                          placeholder="Multi-seller e-commerce platform for African markets">Multi-seller e-commerce platform connecting African businesses and consumers</textarea>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-white/70 text-sm mb-2">Site URL</label>
                                    <input type="url" id="site-url" value="https://africandeals.com" 
                                           class="w-full p-3 rounded-lg form-input">
                                </div>
                                
                                <div>
                                    <label class="block text-white/70 text-sm mb-2">Admin Email</label>
                                    <input type="email" id="admin-email" value="admin@africandeals.com" 
                                           class="w-full p-3 rounded-lg form-input">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- System Preferences -->
                    <div class="config-section">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                            <i class="fas fa-cog text-blue-400 mr-2"></i>
                            System Preferences
                        </h3>
                        
                        <div class="space-y-4">
                            <div class="config-item">
                                <div class="flex-1">
                                    <div class="text-white font-medium">Maintenance Mode</div>
                                    <div class="text-white/60 text-sm">Temporarily disable site access for maintenance</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="maintenance-mode">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            
                            <div class="config-item">
                                <div class="flex-1">
                                    <div class="text-white font-medium">User Registration</div>
                                    <div class="text-white/60 text-sm">Allow new users to register on the platform</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="user-registration" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            
                            <div class="config-item">
                                <div class="flex-1">
                                    <div class="text-white font-medium">Email Verification</div>
                                    <div class="text-white/60 text-sm">Require email verification for new accounts</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="email-verification" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            
                            <div class="config-item">
                                <div class="flex-1">
                                    <div class="text-white font-medium">Auto Backups</div>
                                    <div class="text-white/60 text-sm">Automatically backup system data daily</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="auto-backups" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Time & Localization -->
                    <div class="config-section">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                            <i class="fas fa-clock text-blue-400 mr-2"></i>
                            Time & Localization
                        </h3>
                        
                        <div class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-white/70 text-sm mb-2">Timezone</label>
                                    <select id="timezone" class="w-full p-3 rounded-lg form-input">
                                        <option value="UTC">UTC (GMT+0)</option>
                                        <option value="Africa/Lagos" selected>Africa/Lagos (GMT+1)</option>
                                        <option value="Africa/Cairo">Africa/Cairo (GMT+2)</option>
                                        <option value="Africa/Nairobi">Africa/Nairobi (GMT+3)</option>
                                        <option value="Africa/Johannesburg">Africa/Johannesburg (GMT+2)</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-white/70 text-sm mb-2">Date Format</label>
                                    <select id="date-format" class="w-full p-3 rounded-lg form-input">
                                        <option value="DD/MM/YYYY" selected>DD/MM/YYYY</option>
                                        <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                                        <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                                        <option value="DD-MM-YYYY">DD-MM-YYYY</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-white/70 text-sm mb-2">Default Language</label>
                                    <select id="default-language" class="w-full p-3 rounded-lg form-input">
                                        <option value="en" selected>English</option>
                                        <option value="fr">French</option>
                                        <option value="ar">Arabic</option>
                                        <option value="sw">Kiswahili</option>
                                        <option value="ha">Hausa</option>
                                        <option value="yo">Yoruba</option>
                                        <option value="rw">Kinyarwanda</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-white/70 text-sm mb-2">Default Currency</label>
                                    <select id="default-currency" class="w-full p-3 rounded-lg form-input">
                                        <option value="RWF" selected>RWF (FRW)</option>
                                        <option value="USD">USD ($)</option>
                                        <option value="EUR">EUR (â‚¬)</option>
                                        <option value="NGN">NGN (â‚¦)</option>
                                        <option value="KES">KES (KSh)</option>
                                        <option value="GHS">GHS (â‚µ)</option>
                                        <option value="ZAR">ZAR (R)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Content Management -->
                    <div class="config-section">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                            <i class="fas fa-file-alt text-blue-400 mr-2"></i>
                            Content Management
                        </h3>
                        
                        <div class="space-y-4">
                            <div class="config-item">
                                <div class="flex-1">
                                    <div class="text-white font-medium">Rich Text Editor</div>
                                    <div class="text-white/60 text-sm">Enable advanced text editor for content creation</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="rich-editor" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-white/70 text-sm mb-2">Max Upload Size (MB)</label>
                                    <input type="number" id="max-upload-size" value="10" min="1" max="100" 
                                           class="w-full p-3 rounded-lg form-input">
                                </div>
                                
                                <div>
                                    <label class="block text-white/70 text-sm mb-2">Auto-Save Interval (minutes)</label>
                                    <input type="number" id="auto-save-interval" value="5" min="1" max="60" 
                                           class="w-full p-3 rounded-lg form-input">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-white/70 text-sm mb-2">Allowed File Types</label>
                                <input type="text" id="allowed-file-types" 
                                       value="jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx" 
                                       class="w-full p-3 rounded-lg form-input"
                                       placeholder="Comma-separated file extensions">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Settings Tab -->
            <div id="performance-tab" class="tab-content">
                <div class="config-grid">
                    
                    <!-- Caching Configuration -->
                    <div class="config-section">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                            <i class="fas fa-rocket text-green-400 mr-2"></i>
                            Caching Configuration
                        </h3>
                        
                        <div class="space-y-4">
                            <div class="config-item">
                                <div class="flex-1">
                                    <div class="text-white font-medium">Enable Caching</div>
                                    <div class="text-white/60 text-sm">Improve performance with intelligent caching</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="enable-caching" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-white/70 text-sm mb-2">Cache TTL (minutes)</label>
                                    <input type="number" id="cache-ttl" value="30" min="5" max="1440" 
                                           class="w-full p-3 rounded-lg form-input">
                                </div>
                                
                                <div>
                                    <label class="block text-white/70 text-sm mb-2">Cache Driver</label>
                                    <select id="cache-driver" class="w-full p-3 rounded-lg form-input">
                                        <option value="redis" selected>Redis</option>
                                        <option value="memcached">Memcached</option>
                                        <option value="file">File</option>
                                        <option value="database">Database</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="flex space-x-2">
                                <button onclick="clearCache()" class="flex-1 bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg text-sm">
                                    <i class="fas fa-trash mr-2"></i>Clear Cache
                                </button>
                                <button onclick="warmupCache()" class="flex-1 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm">
                                    <i class="fas fa-fire mr-2"></i>Warmup Cache
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Database Optimization -->
                    <div class="config-section">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                            <i class="fas fa-database text-purple-400 mr-2"></i>
                            Database Optimization
                        </h3>
                        
                        <div class="space-y-4">
                            <div class="config-item">
                                <div class="flex-1">
                                    <div class="text-white font-medium">Query Optimization</div>
                                    <div class="text-white/60 text-sm">Enable automatic query optimization</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="query-optimization" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-white/70 text-sm mb-2">Connection Pool Size</label>
                                    <input type="number" id="connection-pool" value="20" min="5" max="100" 
                                           class="w-full p-3 rounded-lg form-input">
                                </div>
                                
                                <div>
                                    <label class="block text-white/70 text-sm mb-2">Query Timeout (seconds)</label>
                                    <input type="number" id="query-timeout" value="30" min="10" max="300" 
                                           class="w-full p-3 rounded-lg form-input">
                                </div>
                            </div>
                            
                            <div class="flex space-x-2">
                                <button onclick="optimizeDB()" class="flex-1 bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg text-sm">
                                    <i class="fas fa-magic mr-2"></i>Optimize DB
                                </button>
                                <button onclick="analyzeQueries()" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm">
                                    <i class="fas fa-chart-line mr-2"></i>Analyze Queries
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- CDN & Assets -->
                    <div class="config-section">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                            <i class="fas fa-cloud text-blue-400 mr-2"></i>
                            CDN & Assets
                        </h3>
                        
                        <div class="space-y-4">
                            <div class="config-item">
                                <div class="flex-1">
                                    <div class="text-white font-medium">Enable CDN</div>
                                    <div class="text-white/60 text-sm">Use CDN for faster asset delivery</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="enable-cdn" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            
                            <div>
                                <label class="block text-white/70 text-sm mb-2">CDN URL</label>
                                <input type="url" id="cdn-url" value="https://cdn.africandeals.com" 
                                       class="w-full p-3 rounded-lg form-input">
                            </div>
                            
                            <div class="config-item">
                                <div class="flex-1">
                                    <div class="text-white font-medium">Asset Compression</div>
                                    <div class="text-white/60 text-sm">Compress CSS, JS, and image files</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="asset-compression" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Performance Monitoring -->
                    <div class="config-section">
                        <h3 class="text-lg font-bold text-white mb-4 flex items-center">
                            <i class="fas fa-chart-line text-yellow-400 mr-2"></i>
                            Performance Monitoring
                        </h3>
                        
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-green-400">2.3s</div>
                                <div class="text-xs text-white/60">Avg Response</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-blue-400">98.7%</div>
                                <div class="text-xs text-white/60">Uptime</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-yellow-400">156ms</div>
                                <div class="text-xs text-white/60">DB Query</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-purple-400">1.2MB</div>
                                <div class="text-xs text-white/60">Avg Payload</div>
                            </div>
                        </div>
                        
                        <div class="config-item">
                            <div class="flex-1">
                                <div class="text-white font-medium">Performance Alerts</div>
                                <div class="text-white/60 text-sm">Get notified when performance degrades</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="performance-alerts" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Continue with other tabs... -->
            <!-- Security Tab -->
            <div id="security-tab" class="tab-content">
                <!-- Security settings content will be here -->
            </div>

            <!-- Email Tab -->
            <div id="email-tab" class="tab-content">
                <!-- Email settings content will be here -->
            </div>

            <!-- Storage Tab -->
            <div id="storage-tab" class="tab-content">
                <!-- Storage settings content will be here -->
            </div>

            <!-- Integrations Tab -->
            <div id="integrations-tab" class="tab-content">
                <!-- Integrations settings content will be here -->
            </div>

            <!-- Advanced Tab -->
            <div id="advanced-tab" class="tab-content">
                <!-- Advanced settings content will be here -->
            </div>
        </div>
    </div>

<script>
    // Global variables
    let currentTab = 'general';
    let systemSettings = {};
    let unsavedChanges = false;

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        console.log('âš™ï¸ System Settings & Configuration initializing...');
        
        // Check authentication first
        if (!checkAuthentication()) return;
        
        // Load settings and setup
        loadSystemSettings();
        setupEventListeners();
        checkSystemStatus();
        
        console.log('âœ… System Settings & Configuration initialized');
    });

    // Check authentication
    function checkAuthentication() {
        const token = localStorage.getItem('adminToken') || localStorage.getItem('token');
        const userRole = localStorage.getItem('userRole');
        
        if (!token || userRole !== 'admin') {
            console.log('âŒ Authentication failed');
            window.location.href = '/auth/auth-admin.html';
            return false;
        }
        
        console.log('âœ… Authentication verified');
        return true;
    }

    // Setup event listeners
    function setupEventListeners() {
        // Track changes for all form inputs
        const inputs = document.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
            input.addEventListener('change', () => {
                unsavedChanges = true;
                updateSaveButton();
            });
        });
        
        // Maintenance mode special handling
        document.getElementById('maintenance-mode').addEventListener('change', function() {
            const alert = document.getElementById('maintenance-alert');
            if (this.checked) {
                alert.classList.remove('hidden');
            } else {
                alert.classList.add('hidden');
            }
        });
        
        // Warning before page unload if unsaved changes
        window.addEventListener('beforeunload', function(e) {
            if (unsavedChanges) {
                e.preventDefault();
                e.returnValue = '';
            }
        });
    }

    // Load system settings
    async function loadSystemSettings() {
        try {
            console.log('ðŸ“¥ Loading system settings...');
            
            // Simulate loading settings (in real app, this would be an API call)
            systemSettings = {
                site_name: 'African Deals Platform',
                site_description: 'Multi-seller e-commerce platform connecting African businesses and consumers',
                site_url: 'https://africandeals.com',
                admin_email: 'admin@africandeals.com',
                maintenance_mode: false,
                user_registration: true,
                email_verification: true,
                auto_backups: true,
                timezone: 'Africa/Lagos',
                date_format: 'DD/MM/YYYY',
                default_language: 'en',
                default_currency: 'RWF',
                rich_editor: true,
                max_upload_size: 10,
                auto_save_interval: 5,
                allowed_file_types: 'jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx',
                enable_caching: true,
                cache_ttl: 30,
                cache_driver: 'redis',
                query_optimization: true,
                connection_pool: 20,
                query_timeout: 30,
                enable_cdn: true,
                cdn_url: 'https://cdn.africandeals.com',
                asset_compression: true,
                performance_alerts: true
            };
            
            // Populate form fields
            populateSettingsForm();
            
        } catch (error) {
            console.error('âŒ Error loading settings:', error);
            showSystemAlert('Error loading system settings', 'error');
        }
    }

    // Populate form fields with current settings
    function populateSettingsForm() {
        Object.keys(systemSettings).forEach(key => {
            const element = document.getElementById(key.replace(/_/g, '-'));
            if (element) {
                if (element.type === 'checkbox') {
                    element.checked = systemSettings[key];
                } else {
                    element.value = systemSettings[key];
                }
            }
        });
        
        unsavedChanges = false;
        updateSaveButton();
    }

    // Check system status
    async function checkSystemStatus() {
        try {
            // Update performance metrics (simulate real-time data)
            updatePerformanceMetrics();
            
            // Check for system alerts
            checkSystemAlerts();
            
            // Update every 30 seconds
            setTimeout(checkSystemStatus, 30000);
            
        } catch (error) {
            console.error('âŒ Error checking system status:', error);
        }
    }

    // Update performance metrics
    function updatePerformanceMetrics() {
        // Simulate real-time metrics (in real app, these would come from monitoring API)
        const metrics = {
            uptime: (99.5 + Math.random() * 0.5).toFixed(1) + '%',
            memory: Math.floor(60 + Math.random() * 20) + '%',
            disk: Math.floor(35 + Math.random() * 15) + '%',
            cpu: Math.floor(10 + Math.random() * 20) + '%',
            users: Math.floor(1800 + Math.random() * 100)
        };
        
        document.getElementById('system-uptime').textContent = metrics.uptime;
        document.getElementById('memory-usage').textContent = metrics.memory;
        document.getElementById('disk-usage').textContent = metrics.disk;
        document.getElementById('cpu-load').textContent = metrics.cpu;
        document.getElementById('active-users').textContent = metrics.users.toLocaleString();
    }

    // Check for system alerts
    function checkSystemAlerts() {
        const alertContainer = document.getElementById('system-alerts');
        
        // Sample alerts (in real app, these would be dynamic)
        const alerts = [];
        
        // Check memory usage
        const memoryUsage = parseInt(document.getElementById('memory-usage').textContent);
        if (memoryUsage > 80) {
            alerts.push({
                type: 'warning',
                title: 'High Memory Usage',
                message: `System memory usage is at ${memoryUsage}%. Consider optimizing or scaling resources.`
            });
        }
        
        // Check disk usage
        const diskUsage = parseInt(document.getElementById('disk-usage').textContent);
        if (diskUsage > 85) {
            alerts.push({
                type: 'error',
                title: 'Low Disk Space',
                message: `Disk usage is at ${diskUsage}%. Please free up space or expand storage.`
            });
        }
        
        // Show successful backup
        alerts.push({
            type: 'success',
            title: 'Backup Completed',
            message: 'Daily system backup completed successfully at 03:00 AM.'
        });
        
        // Render alerts
        alertContainer.innerHTML = alerts.map(alert => `
            <div class="alert-banner alert-${alert.type}">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-${alert.type === 'success' ? 'check-circle' : alert.type === 'warning' ? 'exclamation-triangle' : 'exclamation-circle'}"></i>
                    <div class="flex-1">
                        <div class="font-medium">${alert.title}</div>
                        <div class="text-sm opacity-90">${alert.message}</div>
                    </div>
                    <button onclick="this.closest('.alert-banner').remove()" class="opacity-70 hover:opacity-100">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        `).join('');
    }

    // Tab switching
    function switchTab(tab) {
        currentTab = tab;
        
        // Update active tab
        document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
        document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
        
        // Show/hide tab content
        document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.remove('active');
        });
        document.getElementById(`${tab}-tab`).classList.add('active');
    }

    // Save all settings
    async function saveAllSettings() {
        try {
            console.log('ðŸ’¾ Saving all settings...');
            
            // Show loading state
            const saveBtn = document.querySelector('button[onclick="saveAllSettings()"]');
            const originalText = saveBtn.innerHTML;
            saveBtn.innerHTML = '<div class="loading-spinner mr-2"></div>Saving...';
            saveBtn.disabled = true;
            
            // Collect all form data
            const formData = new FormData();
            const inputs = document.querySelectorAll('input, select, textarea');
            
            inputs.forEach(input => {
                if (input.type === 'checkbox') {
                    formData.append(input.id, input.checked);
                } else {
                    formData.append(input.id, input.value);
                }
            });
            
            // Simulate API call
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // Update system settings object
            inputs.forEach(input => {
                const key = input.id.replace(/-/g, '_');
                if (input.type === 'checkbox') {
                    systemSettings[key] = input.checked;
                } else {
                    systemSettings[key] = input.value;
                }
            });
            
            unsavedChanges = false;
            updateSaveButton();
            
            // Restore button
            saveBtn.innerHTML = originalText;
            saveBtn.disabled = false;
            
            showSystemAlert('All settings saved successfully!', 'success');
            
        } catch (error) {
            console.error('âŒ Error saving settings:', error);
            showSystemAlert('Error saving settings. Please try again.', 'error');
        }
    }

    // Reset to defaults
    function resetDefaults() {
        if (confirm('Are you sure you want to reset all settings to default values? This cannot be undone.')) {
            // Reset form to default values
            document.getElementById('site-name').value = 'African Deals Platform';
            document.getElementById('maintenance-mode').checked = false;
            document.getElementById('user-registration').checked = true;
            document.getElementById('enable-caching').checked = true;
            // ... reset other fields
            
            unsavedChanges = true;
            updateSaveButton();
            showSystemAlert('Settings reset to defaults. Click Save to apply changes.', 'info');
        }
    }

    // Export configuration
    function exportConfig() {
        const config = {
            export_date: new Date().toISOString(),
            version: '1.0',
            settings: systemSettings
        };
        
        const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `system-config-${new Date().getTime()}.json`;
        a.click();
        URL.revokeObjectURL(url);
        
        showSystemAlert('Configuration exported successfully!', 'success');
    }

    // Performance optimization functions
    function clearCache() {
        if (confirm('Clear all cached data? This may temporarily slow down the system.')) {
            console.log('ðŸ—‘ï¸ Clearing cache...');
            showSystemAlert('Cache cleared successfully!', 'success');
        }
    }

    function warmupCache() {
        console.log('ðŸ”¥ Warming up cache...');
        showSystemAlert('Cache warmup initiated. This may take a few minutes.', 'info');
    }

    function optimizeDB() {
        console.log('ðŸ› ï¸ Optimizing database...');
        showSystemAlert('Database optimization started. Performance may be temporarily affected.', 'info');
    }

    function analyzeQueries() {
        console.log('ðŸ“Š Analyzing queries...');
        showSystemAlert('Query analysis in progress. Results will be available in the reports section.', 'info');
    }

    // Maintenance mode
    function disableMaintenanceMode() {
        document.getElementById('maintenance-mode').checked = false;
        document.getElementById('maintenance-alert').classList.add('hidden');
        unsavedChanges = true;
        updateSaveButton();
    }

    // Utility functions
    function updateSaveButton() {
        const saveBtn = document.querySelector('button[onclick="saveAllSettings()"]');
        if (unsavedChanges) {
            saveBtn.classList.remove('bg-green-500', 'hover:bg-green-600');
            saveBtn.classList.add('bg-yellow-500', 'hover:bg-yellow-600');
            saveBtn.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>Save Changes';
        } else {
            saveBtn.classList.remove('bg-yellow-500', 'hover:bg-yellow-600');
            saveBtn.classList.add('bg-green-500', 'hover:bg-green-600');
            saveBtn.innerHTML = '<i class="fas fa-save mr-2"></i>Save All';
        }
    }

    function showSystemAlert(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `fixed top-4 right-4 z-50 px-6 py-4 rounded-lg text-white ${
            type === 'success' ? 'bg-green-500' : 
            type === 'error' ? 'bg-red-500' : 
            type === 'warning' ? 'bg-yellow-500' : 'bg-blue-500'
        }`;
        toast.textContent = message;
        
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 4000);
    }

    // Make functions globally available
    window.switchTab = switchTab;
    window.saveAllSettings = saveAllSettings;
    window.resetDefaults = resetDefaults;
    window.exportConfig = exportConfig;
    window.clearCache = clearCache;
    window.warmupCache = warmupCache;
    window.optimizeDB = optimizeDB;
    window.analyzeQueries = analyzeQueries;
    window.disableMaintenanceMode = disableMaintenanceMode;

</script>

</body>
</html>