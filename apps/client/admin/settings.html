<!DOCTYPE html>
<html lang="en" class="admin-page">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Settings | Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="admin-auth-check.js"></script>
    <script src="admin-utils.js"></script>
    <style>
        :root {
            --primary-color: #080b3b;
            --secondary-color: #1e40af;
            --accent-color: #3b82f6;
        }
        
        .glass-morphism {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .gradient-bg {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        }
        .sidebar {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        .nav-item {
            transition: all 0.3s ease;
        }
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        .nav-item.active {
            background: rgba(255, 255, 255, 0.2);
            border-left: 3px solid #3b82f6;
        }
        .loading-spinner {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 2px solid #3b82f6;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .form-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }
        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        .form-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
        }
        .settings-card {
            transition: all 0.3s ease;
        }
        .settings-card:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.08);
        }
        .status-badge {
            @apply px-3 py-1 rounded-full text-xs font-medium;
        }
        .status-enabled { @apply bg-green-500/20 text-green-400; }
        .status-disabled { @apply bg-gray-500/20 text-gray-400; }
        .status-warning { @apply bg-yellow-500/20 text-yellow-400; }
        .status-error { @apply bg-red-500/20 text-red-400; }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .tab-btn {
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .tab-btn.active {
            background: rgba(59, 130, 246, 0.2);
            border-color: var(--accent-color);
        }
        .live-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #22c55e;
            display: inline-block;
            margin-right: 6px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .real-time-badge {
            background: linear-gradient(45deg, #22c55e, #16a34a);
            color: white;
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 1rem;
            font-weight: 600;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 28px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: .4s;
            border-radius: 28px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--accent-color);
        }
        input:checked + .slider:before {
            transform: translateX(32px);
        }
        .color-picker {
            width: 50px;
            height: 40px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        .setting-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }
        .setting-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }
        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        .api-key-display {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 0.75rem;
            border-radius: 8px;
            font-family: monospace;
            color: white;
            position: relative;
        }
        .masked-key {
            color: rgba(255, 255, 255, 0.5);
        }
        .maintenance-banner {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.1));
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .backup-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }
        .log-entry {
            background: rgba(255, 255, 255, 0.02);
            border-left: 3px solid;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: 0 4px 4px 0;
            font-family: monospace;
            font-size: 0.875rem;
        }
        .log-info { border-color: #3b82f6; }
        .log-warning { border-color: #f59e0b; }
        .log-error { border-color: #ef4444; }
        .log-success { border-color: #22c55e; }
        .performance-meter {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
            position: relative;
        }
        .performance-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        .performance-good { background: linear-gradient(90deg, #22c55e, #16a34a); }
        .performance-warning { background: linear-gradient(90deg, #f59e0b, #d97706); }
        .performance-critical { background: linear-gradient(90deg, #ef4444, #dc2626); }
    </style>
</head>

<body class="gradient-bg min-h-screen">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <div class="sidebar w-64 lg:w-80 flex-shrink-0 hidden md:flex flex-col">
            <div class="p-6 border-b border-white/10">
                <h2 class="text-xl font-bold text-white">Admin Panel</h2>
            </div>
            
            <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
                <a href="dashboard.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="user-management.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-users"></i>
                    <span>User Management</span>
                </a>
                <a href="manual-payment-approval.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-credit-card"></i>
                    <span>Payment Approval</span>
                </a>
                <a href="products.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-box"></i>
                    <span>Products</span>
                </a>
                <a href="order-management.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Orders</span>
                </a>
                <a href="agents.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-user-tie"></i>
                    <span>Agents</span>
                </a>
                <a href="categories.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-tags"></i>
                    <span>Categories</span>
                </a>
                <a href="brands.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-trademark"></i>
                    <span>Brands</span>
                </a>
                <a href="reviews.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-star"></i>
                    <span>Reviews</span>
                </a>
                <a href="sellers.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-store"></i>
                    <span>Sellers</span>
                </a>
                <a href="support-tickets.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-ticket-alt"></i>
                    <span>Support Tickets</span>
                </a>
                <a href="logs.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-file-alt"></i>
                    <span>System Logs</span>
                </a>
                <a href="promotions.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-tags"></i>
                    <span>Promotions</span>
                </a>
                <a href="cms-management.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-edit"></i>
                    <span>CMS Management</span>
                </a>
                <a href="notification-management.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-bell"></i>
                    <span>Notifications</span>
                </a>
                <a href="backup-restore.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-database"></i>
                    <span>Backup & Restore</span>
                </a>
                <a href="security-api.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-shield-alt"></i>
                    <span>Security & API</span>
                </a>
                <a href="performance-analytics.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-chart-line"></i>
                    <span>Performance & Analytics</span>
                </a>
                <a href="system-integrations.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-plug"></i>
                    <span>System Integrations</span>
                </a>
                <a href="file-manager.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-folder-open"></i>
                    <span>File Manager</span>
                </a>
                <a href="email-templates.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-envelope-open-text"></i>
                    <span>Email Templates</span>
                </a>
                <a href="tax-currency-management.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-coins"></i>
                    <span>Tax & Currency</span>
                </a>
                <a href="shipping-delivery.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-truck"></i>
                    <span>Shipping & Delivery</span>
                </a>
                <a href="import-export.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Import/Export</span>
                </a>
                <a href="reports.html" class="nav-item flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-chart-bar"></i>
                    <span>Reports</span>
                </a>
                <a href="settings.html" class="nav-item active flex items-center space-x-3 p-3 rounded-lg text-white">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 p-4 sm:p-6 lg:p-8 overflow-auto">
            
            <!-- Header -->
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 space-y-4 sm:space-y-0">
                <div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-white mb-2 flex items-center">
                        System Settings
                        <span class="live-indicator ml-3"></span>
                        <span class="real-time-badge ml-2">Live Config</span>
                    </h1>
                    <p class="text-white/70">Comprehensive system configuration and management center</p>
                </div>
                <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                    <button onclick="backupSettings()" class="bg-green-500 hover:bg-green-600 text-white px-3 sm:px-4 py-2 rounded-lg transition text-sm flex items-center justify-center">
                        <i class="fas fa-save mr-2"></i>Backup Settings
                    </button>
                    <button onclick="restoreDefaults()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 sm:px-4 py-2 rounded-lg transition text-sm flex items-center justify-center">
                        <i class="fas fa-undo mr-2"></i>Reset Defaults
                    </button>
                    <button onclick="exportConfig()" class="bg-purple-500 hover:bg-purple-600 text-white px-3 sm:px-4 py-2 rounded-lg transition text-sm flex items-center justify-center">
                        <i class="fas fa-download mr-2"></i>Export Config
                    </button>
                </div>
            </div>

            <!-- System Health Banner -->
            <div class="glass-morphism rounded-xl p-6 mb-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center">
                            <i class="fas fa-heart text-green-400 text-2xl"></i>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-white">System Health: Excellent</h2>
                            <p class="text-white/70">All systems operational • Last check: 2 minutes ago</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="text-right">
                            <div class="text-white font-medium">Uptime</div>
                            <div class="text-green-400 text-xl font-bold" id="system-uptime">99.9%</div>
                        </div>
                        <div class="text-right">
                            <div class="text-white font-medium">Response Time</div>
                            <div class="text-green-400 text-xl font-bold" id="response-time">45ms</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="flex flex-wrap gap-2 mb-6">
                <div class="tab-btn active" data-tab="general" onclick="switchTab('general')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-sliders-h"></i>
                        <span class="text-white font-medium">General</span>
                    </div>
                </div>
                <div class="tab-btn" data-tab="appearance" onclick="switchTab('appearance')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-palette"></i>
                        <span class="text-white font-medium">Appearance</span>
                    </div>
                </div>
                <div class="tab-btn" data-tab="security" onclick="switchTab('security')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-shield-alt"></i>
                        <span class="text-white font-medium">Security</span>
                    </div>
                </div>
                <div class="tab-btn" data-tab="integrations" onclick="switchTab('integrations')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-plug"></i>
                        <span class="text-white font-medium">Integrations</span>
                    </div>
                </div>
                <div class="tab-btn" data-tab="performance" onclick="switchTab('performance')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-tachometer-alt"></i>
                        <span class="text-white font-medium">Performance</span>
                    </div>
                </div>
                <div class="tab-btn" data-tab="maintenance" onclick="switchTab('maintenance')">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-tools"></i>
                        <span class="text-white font-medium">Maintenance</span>
                    </div>
                </div>
            </div>

            <!-- Tab Contents -->
            
            <!-- General Settings Tab -->
            <div id="general-tab" class="tab-content active">
                <div class="space-y-6">
                    
                    <!-- Site Configuration -->
                    <div class="glass-morphism rounded-xl p-6">
                        <h3 class="text-xl font-bold text-white mb-6">Site Configuration</h3>
                        <div class="config-grid">
                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">Site Name</label>
                                <input type="text" id="site-name" value="African Deals Platform" class="w-full p-3 rounded-lg form-input">
                                <p class="text-white/50 text-xs mt-2">This appears in browser titles and emails</p>
                            </div>

                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">Site Description</label>
                                <textarea id="site-description" rows="3" class="w-full p-3 rounded-lg form-input" placeholder="Brief description of your platform...">Premier e-commerce platform connecting African businesses worldwide</textarea>
                            </div>

                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">Default Language</label>
                                <select id="default-language" class="w-full p-3 rounded-lg form-input">
                                    <option value="en">English</option>
                                    <option value="fr">French</option>
                                    <option value="sw">Kiswahili</option>
                                    <option value="rw">Kinyarwanda</option>
                                    <option value="ar">Arabic</option>
                                </select>
                            </div>

                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">Default Currency</label>
                                <select id="default-currency" class="w-full p-3 rounded-lg form-input">
                                    <option value="RWF" selected>RWF - Rwandan Franc</option>
                                    <option value="USD">USD - US Dollar</option>
                                    <option value="EUR">EUR - Euro</option>
                                    <option value="KES">KES - Kenyan Shilling</option>
                                    <option value="UGX">UGX - Ugandan Shilling</option>
                                </select>
                            </div>

                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">Timezone</label>
                                <select id="timezone" class="w-full p-3 rounded-lg form-input">
                                    <option value="Africa/Kigali">Africa/Kigali (GMT+2)</option>
                                    <option value="Africa/Nairobi">Africa/Nairobi (GMT+3)</option>
                                    <option value="Africa/Lagos">Africa/Lagos (GMT+1)</option>
                                    <option value="UTC">UTC (GMT+0)</option>
                                </select>
                            </div>

                            <div class="setting-item">
                                <label class="flex items-center justify-between">
                                    <span class="text-white font-medium">Maintenance Mode</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="maintenance-mode">
                                        <span class="slider"></span>
                                    </label>
                                </label>
                                <p class="text-white/50 text-sm mt-2">Temporarily disable public access</p>
                            </div>
                        </div>
                    </div>

                    <!-- Email Configuration -->
                    <div class="glass-morphism rounded-xl p-6">
                        <h3 class="text-xl font-bold text-white mb-6">Email Configuration</h3>
                        <div class="config-grid">
                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">From Name</label>
                                <input type="text" id="email-from-name" value="African Deals" class="w-full p-3 rounded-lg form-input">
                            </div>

                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">From Email</label>
                                <input type="email" id="email-from-address" value="noreply@africandeals.com" class="w-full p-3 rounded-lg form-input">
                            </div>

                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">SMTP Host</label>
                                <input type="text" id="smtp-host" value="smtp.gmail.com" class="w-full p-3 rounded-lg form-input">
                            </div>

                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">SMTP Port</label>
                                <input type="number" id="smtp-port" value="587" class="w-full p-3 rounded-lg form-input">
                            </div>

                            <div class="setting-item">
                                <label class="flex items-center justify-between">
                                    <span class="text-white font-medium">Email Notifications</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="email-notifications" checked>
                                        <span class="slider"></span>
                                    </label>
                                </label>
                            </div>

                            <div class="setting-item">
                                <button onclick="testEmail()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg w-full">
                                    <i class="fas fa-envelope mr-2"></i>Test Email Configuration
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Appearance Tab -->
            <div id="appearance-tab" class="tab-content">
                <div class="space-y-6">
                    
                    <!-- Theme Settings -->
                    <div class="glass-morphism rounded-xl p-6">
                        <h3 class="text-xl font-bold text-white mb-6">Theme & Branding</h3>
                        <div class="config-grid">
                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">Primary Brand Color</label>
                                <div class="flex items-center space-x-3">
                                    <input type="color" id="primary-color" value="#3b82f6" class="color-picker">
                                    <input type="text" id="primary-color-hex" value="#3b82f6" class="flex-1 p-3 rounded-lg form-input">
                                </div>
                            </div>

                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">Secondary Color</label>
                                <div class="flex items-center space-x-3">
                                    <input type="color" id="secondary-color" value="#1e40af" class="color-picker">
                                    <input type="text" id="secondary-color-hex" value="#1e40af" class="flex-1 p-3 rounded-lg form-input">
                                </div>
                            </div>

                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">Logo Upload</label>
                                <div class="border-2 border-dashed border-white/20 rounded-lg p-6 text-center">
                                    <i class="fas fa-image text-white/50 text-3xl mb-3"></i>
                                    <p class="text-white/70 mb-3">Drop logo here or click to upload</p>
                                    <input type="file" id="logo-upload" accept="image/*" class="hidden">
                                    <button onclick="document.getElementById('logo-upload').click()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">
                                        Choose File
                                    </button>
                                </div>
                            </div>

                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">Favicon</label>
                                <div class="border-2 border-dashed border-white/20 rounded-lg p-6 text-center">
                                    <i class="fas fa-star text-white/50 text-2xl mb-2"></i>
                                    <p class="text-white/70 mb-3">Upload favicon (32x32px)</p>
                                    <input type="file" id="favicon-upload" accept="image/*" class="hidden">
                                    <button onclick="document.getElementById('favicon-upload').click()" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg text-sm">
                                        Choose File
                                    </button>
                                </div>
                            </div>

                            <div class="setting-item">
                                <label class="block text-white/70 text-sm mb-2">Font Family</label>
                                <select id="font-family" class="w-full p-3 rounded-lg form-input">
                                    <option value="inter">Inter (Default)</option>
                                    <option value="roboto">Roboto</option>
                                    <option value="opensans">Open Sans</option>
                                    <option value="lato">Lato</option>
                                    <option value="montserrat">Montserrat</option>
                                </select>
                            </div>

                            <div class="setting-item">
                                <label class="flex items-center justify-between">
                                    <span class="text-white font-medium">Dark Mode Default</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="dark-mode-default" checked>
                                        <span class="slider"></span>
                                    </label>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Layout Settings -->
                    <div class="glass-morphism rounded-xl p-6">
                        <h3 class="text-xl font-bold text-white mb-6">Layout Settings</h3>
                        <div class="config-grid">
                            <div class="setting-item">
                                <label class="flex items-center justify-between">
                                    <span class="text-white font-medium">Sidebar Collapsed by Default</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="sidebar-collapsed">
                                        <span class="slider"></span>
                                    </label>
                                </label>
                            </div>

                            <div class="setting-item">
                                <label class="flex items-center justify-between">
                                    <span class="text-white font-medium">Show Breadcrumbs</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="show-breadcrumbs" checked>
                                        <span class="slider"></span>
                                    </label>
                                </label>
                            </div>

                            <div class="setting-item">
                                <label class="flex items-center justify-between">
                                    <span class="text-white font-medium">Compact Mode</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="compact-mode">
                                        <span class="slider"></span>
                                    </label>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Tab -->
            <div id="security-tab" class="tab-content">
                <div class="space-y-6" id="security-settings-container">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- Integrations Tab -->
            <div id="integrations-tab" class="tab-content">
                <div class="space-y-6" id="integrations-container">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- Performance Tab -->
            <div id="performance-tab" class="tab-content">
                <div class="space-y-6" id="performance-container">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- Maintenance Tab -->
            <div id="maintenance-tab" class="tab-content">
                <div class="space-y-6" id="maintenance-container">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- Save Settings Button -->
            <div class="fixed bottom-8 right-8 flex space-x-3">
                <button onclick="saveAllSettings()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-full shadow-lg transition-all">
                    <i class="fas fa-save mr-2"></i>Save All Changes
                </button>
            </div>
        </div>
    </div>

<script>
    // Global variables
    let currentTab = 'general';
    let settingsChanged = false;
    let originalSettings = {};

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        console.log('⚙️ System Settings initializing...');
        
        // Check authentication first
        if (!checkAuthentication()) return;
        
        // Load all settings
        loadAllSettings();
        setupEventListeners();
        
        // Update system metrics
        updateSystemMetrics();
        setInterval(updateSystemMetrics, 30000); // Update every 30 seconds
        
        console.log('✅ System Settings initialized');
    });

    // Check authentication
    function checkAuthentication() {
        const token = localStorage.getItem('adminToken') || localStorage.getItem('token');
        const userRole = localStorage.getItem('userRole');
        
        if (!token) {
            console.log('❌ No authentication token found');
            window.location.href = '/auth/auth-admin.html';
            return false;
        }
        
        if (userRole !== 'admin') {
            console.log('❌ Insufficient permissions');
            window.location.href = '/auth/auth-admin.html';
            return false;
        }
        
        console.log('✅ Authentication verified');
        return true;
    }

    // Setup event listeners
    function setupEventListeners() {
        // Track changes in form inputs
        document.addEventListener('input', trackChanges);
        document.addEventListener('change', trackChanges);
        
        // Color picker synchronization
        const primaryColorPicker = document.getElementById('primary-color');
        const primaryColorHex = document.getElementById('primary-color-hex');
        const secondaryColorPicker = document.getElementById('secondary-color');
        const secondaryColorHex = document.getElementById('secondary-color-hex');
        
        if (primaryColorPicker && primaryColorHex) {
            primaryColorPicker.addEventListener('input', (e) => {
                primaryColorHex.value = e.target.value;
                updateThemePreview();
            });
            primaryColorHex.addEventListener('input', (e) => {
                if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                    primaryColorPicker.value = e.target.value;
                    updateThemePreview();
                }
            });
        }
        
        if (secondaryColorPicker && secondaryColorHex) {
            secondaryColorPicker.addEventListener('input', (e) => {
                secondaryColorHex.value = e.target.value;
                updateThemePreview();
            });
            secondaryColorHex.addEventListener('input', (e) => {
                if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                    secondaryColorPicker.value = e.target.value;
                    updateThemePreview();
                }
            });
        }
    }

    // Load all settings
    function loadAllSettings() {
        // Load general settings (already in HTML)
        loadSecuritySettings();
        loadIntegrationsSettings();
        loadPerformanceSettings();
        loadMaintenanceSettings();
        
        // Store original settings for change tracking
        originalSettings = getCurrentSettings();
    }

    // Load security settings
    function loadSecuritySettings() {
        const container = document.getElementById('security-settings-container');
        container.innerHTML = `
            <!-- Authentication Settings -->
            <div class="glass-morphism rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6">Authentication & Access</h3>
                <div class="config-grid">
                    <div class="setting-item">
                        <label class="flex items-center justify-between">
                            <span class="text-white font-medium">Two-Factor Authentication</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="two-factor-auth" checked>
                                <span class="slider"></span>
                            </label>
                        </label>
                        <p class="text-white/50 text-sm mt-2">Require 2FA for admin accounts</p>
                    </div>

                    <div class="setting-item">
                        <label class="block text-white/70 text-sm mb-2">Session Timeout (minutes)</label>
                        <input type="number" id="session-timeout" value="60" min="15" max="480" class="w-full p-3 rounded-lg form-input">
                    </div>

                    <div class="setting-item">
                        <label class="block text-white/70 text-sm mb-2">Password Minimum Length</label>
                        <input type="number" id="password-min-length" value="8" min="6" max="32" class="w-full p-3 rounded-lg form-input">
                    </div>

                    <div class="setting-item">
                        <label class="flex items-center justify-between">
                            <span class="text-white font-medium">Password Complexity</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="password-complexity" checked>
                                <span class="slider"></span>
                            </label>
                        </label>
                        <p class="text-white/50 text-sm mt-2">Require uppercase, lowercase, numbers & symbols</p>
                    </div>

                    <div class="setting-item">
                        <label class="block text-white/70 text-sm mb-2">Max Login Attempts</label>
                        <input type="number" id="max-login-attempts" value="5" min="3" max="20" class="w-full p-3 rounded-lg form-input">
                    </div>

                    <div class="setting-item">
                        <label class="flex items-center justify-between">
                            <span class="text-white font-medium">Login Notifications</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="login-notifications" checked>
                                <span class="slider"></span>
                            </label>
                        </label>
                    </div>
                </div>
            </div>

            <!-- API Security -->
            <div class="glass-morphism rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6">API Security</h3>
                <div class="config-grid">
                    <div class="setting-item">
                        <label class="block text-white/70 text-sm mb-2">API Rate Limit (requests/hour)</label>
                        <input type="number" id="api-rate-limit" value="1000" min="100" max="10000" class="w-full p-3 rounded-lg form-input">
                    </div>

                    <div class="setting-item">
                        <label class="block text-white/70 text-sm mb-2">API Key</label>
                        <div class="api-key-display">
                            <span class="masked-key">••••••••••••••••••••••••••••••••</span>
                            <button onclick="toggleApiKeyVisibility()" class="absolute right-3 top-3 text-white/50 hover:text-white">
                                <i class="fas fa-eye" id="api-key-eye"></i>
                            </button>
                        </div>
                        <div class="flex space-x-2 mt-2">
                            <button onclick="regenerateApiKey()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-2 rounded text-sm">
                                <i class="fas fa-refresh mr-1"></i>Regenerate
                            </button>
                            <button onclick="copyApiKey()" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded text-sm">
                                <i class="fas fa-copy mr-1"></i>Copy
                            </button>
                        </div>
                    </div>

                    <div class="setting-item">
                        <label class="flex items-center justify-between">
                            <span class="text-white font-medium">CORS Enabled</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="cors-enabled" checked>
                                <span class="slider"></span>
                            </label>
                        </label>
                    </div>

                    <div class="setting-item">
                        <label class="block text-white/70 text-sm mb-2">Allowed Origins</label>
                        <textarea id="allowed-origins" rows="3" class="w-full p-3 rounded-lg form-input" placeholder="https://yourdomain.com">https://africandeals.com
https://admin.africandeals.com</textarea>
                    </div>
                </div>
            </div>

            <!-- SSL/TLS Settings -->
            <div class="glass-morphism rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6">SSL/TLS Configuration</h3>
                <div class="config-grid">
                    <div class="setting-item">
                        <div class="flex items-center justify-between mb-3">
                            <span class="text-white font-medium">SSL Certificate Status</span>
                            <span class="status-badge status-enabled">Active</span>
                        </div>
                        <p class="text-white/60 text-sm">Certificate expires: March 15, 2025</p>
                        <div class="flex space-x-2 mt-3">
                            <button onclick="renewSSL()" class="bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded text-sm">
                                <i class="fas fa-sync mr-1"></i>Renew
                            </button>
                            <button onclick="uploadSSL()" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded text-sm">
                                <i class="fas fa-upload mr-1"></i>Upload New
                            </button>
                        </div>
                    </div>

                    <div class="setting-item">
                        <label class="flex items-center justify-between">
                            <span class="text-white font-medium">Force HTTPS</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="force-https" checked>
                                <span class="slider"></span>
                            </label>
                        </label>
                    </div>

                    <div class="setting-item">
                        <label class="flex items-center justify-between">
                            <span class="text-white font-medium">HSTS Enabled</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="hsts-enabled" checked>
                                <span class="slider"></span>
                            </label>
                        </label>
                        <p class="text-white/50 text-sm mt-2">HTTP Strict Transport Security</p>
                    </div>
                </div>
            </div>
        `;
    }

    // Load integrations settings
    function loadIntegrationsSettings() {
        const container = document.getElementById('integrations-container');
        container.innerHTML = `
            <!-- Payment Gateways -->
            <div class="glass-morphism rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6">Payment Gateways</h3>
                <div class="space-y-4">
                    <div class="setting-item">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center">
                                    <i class="fab fa-paypal text-blue-400"></i>
                                </div>
                                <div>
                                    <h4 class="text-white font-medium">PayPal</h4>
                                    <p class="text-white/60 text-sm">Accept PayPal payments</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="status-badge status-enabled">Connected</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="paypal-enabled" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-white/70 text-sm mb-2">Client ID</label>
                                <input type="password" id="paypal-client-id" value="••••••••••••••••" class="w-full p-3 rounded-lg form-input">
                            </div>
                            <div>
                                <label class="block text-white/70 text-sm mb-2">Client Secret</label>
                                <input type="password" id="paypal-secret" value="••••••••••••••••" class="w-full p-3 rounded-lg form-input">
                            </div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center">
                                    <i class="fab fa-stripe text-purple-400"></i>
                                </div>
                                <div>
                                    <h4 class="text-white font-medium">Stripe</h4>
                                    <p class="text-white/60 text-sm">Credit/debit card processing</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="status-badge status-enabled">Connected</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="stripe-enabled" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-white/70 text-sm mb-2">Publishable Key</label>
                                <input type="text" id="stripe-public-key" value="pk_live_••••••••••••••••" class="w-full p-3 rounded-lg form-input">
                            </div>
                            <div>
                                <label class="block text-white/70 text-sm mb-2">Secret Key</label>
                                <input type="password" id="stripe-secret-key" value="••••••••••••••••" class="w-full p-3 rounded-lg form-input">
                            </div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-mobile-alt text-green-400"></i>
                                </div>
                                <div>
                                    <h4 class="text-white font-medium">Mobile Money</h4>
                                    <p class="text-white/60 text-sm">MTN Mobile Money, Airtel Money</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="status-badge status-disabled">Disconnected</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="mobile-money-enabled">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Email Services -->
            <div class="glass-morphism rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6">Email Services</h3>
                <div class="space-y-4">
                    <div class="setting-item">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center">
                                    <i class="fab fa-google text-red-400"></i>
                                </div>
                                <div>
                                    <h4 class="text-white font-medium">Gmail SMTP</h4>
                                    <p class="text-white/60 text-sm">Send emails via Gmail</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="status-badge status-enabled">Active</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="gmail-smtp-enabled" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-envelope text-orange-400"></i>
                                </div>
                                <div>
                                    <h4 class="text-white font-medium">Mailgun</h4>
                                    <p class="text-white/60 text-sm">Transactional email service</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="status-badge status-disabled">Inactive</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="mailgun-enabled">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cloud Storage -->
            <div class="glass-morphism rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6">Cloud Storage</h3>
                <div class="space-y-4">
                    <div class="setting-item">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center">
                                    <i class="fab fa-aws text-yellow-400"></i>
                                </div>
                                <div>
                                    <h4 class="text-white font-medium">Amazon S3</h4>
                                    <p class="text-white/60 text-sm">File storage and CDN</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="status-badge status-enabled">Connected</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="aws-s3-enabled" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-white/70 text-sm mb-2">Bucket Name</label>
                                <input type="text" id="s3-bucket" value="africandeals-media" class="w-full p-3 rounded-lg form-input">
                            </div>
                            <div>
                                <label class="block text-white/70 text-sm mb-2">Region</label>
                                <select id="s3-region" class="w-full p-3 rounded-lg form-input">
                                    <option value="us-east-1">US East (N. Virginia)</option>
                                    <option value="eu-west-1">EU (Ireland)</option>
                                    <option value="ap-southeast-1">Asia Pacific (Singapore)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    // Load performance settings
    function loadPerformanceSettings() {
        const container = document.getElementById('performance-container');
        container.innerHTML = `
            <!-- Performance Metrics -->
            <div class="glass-morphism rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6">Current Performance</h3>
                <div class="space-y-6">
                    <div class="setting-item">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-white font-medium">CPU Usage</span>
                            <span class="text-white text-sm">23%</span>
                        </div>
                        <div class="performance-meter">
                            <div class="performance-fill performance-good" style="width: 23%"></div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-white font-medium">Memory Usage</span>
                            <span class="text-white text-sm">1.2GB / 4GB (30%)</span>
                        </div>
                        <div class="performance-meter">
                            <div class="performance-fill performance-good" style="width: 30%"></div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-white font-medium">Disk Usage</span>
                            <span class="text-white text-sm">45GB / 100GB (45%)</span>
                        </div>
                        <div class="performance-meter">
                            <div class="performance-fill performance-good" style="width: 45%"></div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-white font-medium">Database Performance</span>
                            <span class="text-white text-sm">Excellent (2.5ms avg)</span>
                        </div>
                        <div class="performance-meter">
                            <div class="performance-fill performance-good" style="width: 95%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Caching Settings -->
            <div class="glass-morphism rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6">Caching Configuration</h3>
                <div class="config-grid">
                    <div class="setting-item">
                        <label class="flex items-center justify-between">
                            <span class="text-white font-medium">Enable Page Caching</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="page-caching" checked>
                                <span class="slider"></span>
                            </label>
                        </label>
                        <p class="text-white/50 text-sm mt-2">Cache rendered pages for faster loading</p>
                    </div>

                    <div class="setting-item">
                        <label class="block text-white/70 text-sm mb-2">Cache TTL (seconds)</label>
                        <input type="number" id="cache-ttl" value="3600" min="60" max="86400" class="w-full p-3 rounded-lg form-input">
                    </div>

                    <div class="setting-item">
                        <label class="flex items-center justify-between">
                            <span class="text-white font-medium">Redis Cache</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="redis-cache" checked>
                                <span class="slider"></span>
                            </label>
                        </label>
                        <div class="mt-2">
                            <span class="status-badge status-enabled">Connected</span>
                        </div>
                    </div>

                    <div class="setting-item">
                        <label class="flex items-center justify-between">
                            <span class="text-white font-medium">CDN Enabled</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="cdn-enabled" checked>
                                <span class="slider"></span>
                            </label>
                        </label>
                        <p class="text-white/50 text-sm mt-2">Serve static assets from CDN</p>
                    </div>

                    <div class="setting-item">
                        <button onclick="clearCache()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg w-full">
                            <i class="fas fa-broom mr-2"></i>Clear All Cache
                        </button>
                    </div>

                    <div class="setting-item">
                        <button onclick="optimizeDatabase()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg w-full">
                            <i class="fas fa-database mr-2"></i>Optimize Database
                        </button>
                    </div>
                </div>
            </div>

            <!-- Resource Limits -->
            <div class="glass-morphism rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6">Resource Limits</h3>
                <div class="config-grid">
                    <div class="setting-item">
                        <label class="block text-white/70 text-sm mb-2">Max Upload Size (MB)</label>
                        <input type="number" id="max-upload-size" value="50" min="1" max="500" class="w-full p-3 rounded-lg form-input">
                    </div>

                    <div class="setting-item">
                        <label class="block text-white/70 text-sm mb-2">Max Concurrent Users</label>
                        <input type="number" id="max-users" value="10000" min="100" max="50000" class="w-full p-3 rounded-lg form-input">
                    </div>

                    <div class="setting-item">
                        <label class="block text-white/70 text-sm mb-2">Request Timeout (seconds)</label>
                        <input type="number" id="request-timeout" value="30" min="5" max="300" class="w-full p-3 rounded-lg form-input">
                    </div>

                    <div class="setting-item">
                        <label class="block text-white/70 text-sm mb-2">Memory Limit (MB)</label>
                        <input type="number" id="memory-limit" value="512" min="128" max="2048" class="w-full p-3 rounded-lg form-input">
                    </div>
                </div>
            </div>
        `;
    }

    // Load maintenance settings
    function loadMaintenanceSettings() {
        const container = document.getElementById('maintenance-container');
        container.innerHTML = `
            <!-- Maintenance Mode -->
            <div class="maintenance-banner">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-exclamation-triangle text-red-400 text-2xl"></i>
                    <div>
                        <h3 class="text-white font-bold text-lg">Maintenance Mode</h3>
                        <p class="text-white/70">System is currently in maintenance mode. Public access is restricted.</p>
                    </div>
                    <button onclick="toggleMaintenanceMode()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg">
                        Disable Maintenance
                    </button>
                </div>
            </div>

            <!-- System Backups -->
            <div class="glass-morphism rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6">System Backups</h3>
                <div class="space-y-4">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-white font-medium">Automatic Backups</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="auto-backups" checked>
                            <span class="slider"></span>
                        </label>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="setting-item">
                            <label class="block text-white/70 text-sm mb-2">Backup Frequency</label>
                            <select id="backup-frequency" class="w-full p-3 rounded-lg form-input">
                                <option value="daily" selected>Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label class="block text-white/70 text-sm mb-2">Retention Period</label>
                            <select id="backup-retention" class="w-full p-3 rounded-lg form-input">
                                <option value="7">7 days</option>
                                <option value="30" selected>30 days</option>
                                <option value="90">90 days</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex space-x-3 mb-6">
                        <button onclick="createBackup()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg">
                            <i class="fas fa-plus mr-2"></i>Create Backup
                        </button>
                        <button onclick="restoreBackup()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">
                            <i class="fas fa-upload mr-2"></i>Restore Backup
                        </button>
                    </div>

                    <div class="space-y-3">
                        <h4 class="text-white font-medium">Recent Backups</h4>
                        <div class="backup-item">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h5 class="text-white font-medium">Full System Backup</h5>
                                    <p class="text-white/60 text-sm">January 17, 2025 3:00 AM • 2.4 GB</p>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="downloadBackup(1)" class="text-blue-400 hover:text-blue-300">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button onclick="restoreBackup(1)" class="text-green-400 hover:text-green-300">
                                        <i class="fas fa-undo"></i>
                                    </button>
                                    <button onclick="deleteBackup(1)" class="text-red-400 hover:text-red-300">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="backup-item">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h5 class="text-white font-medium">Database Backup</h5>
                                    <p class="text-white/60 text-sm">January 16, 2025 3:00 AM • 856 MB</p>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="downloadBackup(2)" class="text-blue-400 hover:text-blue-300">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <button onclick="restoreBackup(2)" class="text-green-400 hover:text-green-300">
                                        <i class="fas fa-undo"></i>
                                    </button>
                                    <button onclick="deleteBackup(2)" class="text-red-400 hover:text-red-300">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Logs -->
            <div class="glass-morphism rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6">System Logs</h3>
                <div class="space-y-4">
                    <div class="flex justify-between items-center">
                        <div class="flex space-x-2">
                            <select id="log-level" class="form-input px-3 py-2 rounded">
                                <option value="all">All Levels</option>
                                <option value="error">Errors Only</option>
                                <option value="warning">Warnings</option>
                                <option value="info">Info</option>
                            </select>
                            <button onclick="refreshLogs()" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded">
                                <i class="fas fa-refresh"></i>
                            </button>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="exportLogs()" class="bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded text-sm">
                                <i class="fas fa-download mr-1"></i>Export
                            </button>
                            <button onclick="clearLogs()" class="bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded text-sm">
                                <i class="fas fa-trash mr-1"></i>Clear
                            </button>
                        </div>
                    </div>

                    <div class="space-y-2 max-h-96 overflow-y-auto">
                        <div class="log-entry log-info">
                            <div class="flex justify-between text-xs text-white/50 mb-1">
                                <span>2025-01-17 14:23:45</span>
                                <span>INFO</span>
                            </div>
                            <div class="text-white text-sm">User login successful: admin@africandeals.com</div>
                        </div>

                        <div class="log-entry log-success">
                            <div class="flex justify-between text-xs text-white/50 mb-1">
                                <span>2025-01-17 14:20:12</span>
                                <span>SUCCESS</span>
                            </div>
                            <div class="text-white text-sm">Backup created successfully: backup_20250117_142012.tar.gz</div>
                        </div>

                        <div class="log-entry log-warning">
                            <div class="flex justify-between text-xs text-white/50 mb-1">
                                <span>2025-01-17 14:15:33</span>
                                <span>WARNING</span>
                            </div>
                            <div class="text-white text-sm">High memory usage detected: 89% of available memory</div>
                        </div>

                        <div class="log-entry log-info">
                            <div class="flex justify-between text-xs text-white/50 mb-1">
                                <span>2025-01-17 14:10:07</span>
                                <span>INFO</span>
                            </div>
                            <div class="text-white text-sm">API request processed: GET /api/products</div>
                        </div>

                        <div class="log-entry log-error">
                            <div class="flex justify-between text-xs text-white/50 mb-1">
                                <span>2025-01-17 14:05:18</span>
                                <span>ERROR</span>
                            </div>
                            <div class="text-white text-sm">Database connection timeout: mysql://localhost:3306</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Updates -->
            <div class="glass-morphism rounded-xl p-6">
                <h3 class="text-xl font-bold text-white mb-6">System Updates</h3>
                <div class="space-y-4">
                    <div class="flex justify-between items-center p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg">
                        <div>
                            <h4 class="text-white font-medium">System Update Available</h4>
                            <p class="text-white/60 text-sm">Version 2.1.5 is now available with security fixes</p>
                        </div>
                        <button onclick="installUpdate()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">
                            Install Update
                        </button>
                    </div>

                    <div class="setting-item">
                        <label class="flex items-center justify-between">
                            <span class="text-white font-medium">Auto Updates</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="auto-updates">
                                <span class="slider"></span>
                            </label>
                        </label>
                        <p class="text-white/50 text-sm mt-2">Automatically install security updates</p>
                    </div>

                    <div class="setting-item">
                        <div class="text-white/70 text-sm space-y-1">
                            <div>Current Version: v2.1.4</div>
                            <div>Last Updated: January 10, 2025</div>
                            <div>Update Channel: Stable</div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    // Tab switching
    function switchTab(tab) {
        currentTab = tab;
        
        // Update active tab
        document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
        document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
        
        // Show/hide tab content
        document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.remove('active');
        });
        document.getElementById(`${tab}-tab`).classList.add('active');
    }

    // Track changes
    function trackChanges() {
        settingsChanged = true;
        // Show save button with animation or highlight
        const saveBtn = document.querySelector('[onclick="saveAllSettings()"]');
        if (saveBtn) {
            saveBtn.classList.add('shadow-xl', 'scale-110');
        }
    }

    // Get current settings
    function getCurrentSettings() {
        const settings = {};
        
        // Collect all form inputs
        const inputs = document.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
            if (input.type === 'checkbox') {
                settings[input.id] = input.checked;
            } else {
                settings[input.id] = input.value;
            }
        });
        
        return settings;
    }

    // Update system metrics
    function updateSystemMetrics() {
        // Simulate real-time system metrics
        const uptime = Math.random() * 0.1 + 99.9;
        const responseTime = Math.floor(Math.random() * 20) + 35;
        
        document.getElementById('system-uptime').textContent = uptime.toFixed(1) + '%';
        document.getElementById('response-time').textContent = responseTime + 'ms';
    }

    // Theme preview update
    function updateThemePreview() {
        const primaryColor = document.getElementById('primary-color-hex').value;
        const secondaryColor = document.getElementById('secondary-color-hex').value;
        
        // Update CSS custom properties for preview
        document.documentElement.style.setProperty('--accent-color', primaryColor);
        document.documentElement.style.setProperty('--secondary-color', secondaryColor);
    }

    // Settings functions
    async function saveAllSettings() {
        const settings = getCurrentSettings();
        
        try {
            console.log('💾 Saving all settings...', settings);
            
            // Simulate API call
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            settingsChanged = false;
            originalSettings = settings;
            
            showToast('All settings saved successfully!', 'success');
            
            // Reset save button
            const saveBtn = document.querySelector('[onclick="saveAllSettings()"]');
            if (saveBtn) {
                saveBtn.classList.remove('shadow-xl', 'scale-110');
            }
            
        } catch (error) {
            console.error('Error saving settings:', error);
            showToast('Error saving settings: ' + error.message, 'error');
        }
    }

    function backupSettings() {
        const settings = getCurrentSettings();
        const backup = {
            timestamp: new Date().toISOString(),
            settings: settings
        };
        
        const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = `settings-backup-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        
        URL.revokeObjectURL(url);
        showToast('Settings backup downloaded', 'success');
    }

    function restoreDefaults() {
        if (confirm('Are you sure you want to restore default settings? This will overwrite all current settings.')) {
            // Reset all form inputs to defaults
            location.reload(); // Simple way to reset to defaults
            showToast('Settings restored to defaults', 'info');
        }
    }

    function exportConfig() {
        showToast('Exporting configuration...', 'info');
        // Implementation would export full system configuration
    }

    function testEmail() {
        showToast('Sending test email...', 'info');
        setTimeout(() => {
            showToast('Test email sent successfully!', 'success');
        }, 2000);
    }

    function toggleApiKeyVisibility() {
        const display = document.querySelector('.api-key-display .masked-key');
        const eye = document.getElementById('api-key-eye');
        
        if (display.textContent.includes('••••')) {
            display.textContent = 'ak_live_1234567890abcdef1234567890abcdef';
            display.classList.remove('masked-key');
            eye.classList.remove('fa-eye');
            eye.classList.add('fa-eye-slash');
        } else {
            display.textContent = '••••••••••••••••••••••••••••••••';
            display.classList.add('masked-key');
            eye.classList.remove('fa-eye-slash');
            eye.classList.add('fa-eye');
        }
    }

    function regenerateApiKey() {
        if (confirm('Are you sure you want to regenerate the API key? This will invalidate the current key.')) {
            showToast('API key regenerated successfully', 'success');
        }
    }

    function copyApiKey() {
        // In a real implementation, this would copy the actual API key
        navigator.clipboard.writeText('ak_live_1234567890abcdef1234567890abcdef');
        showToast('API key copied to clipboard', 'success');
    }

    function renewSSL() {
        showToast('Renewing SSL certificate...', 'info');
        setTimeout(() => {
            showToast('SSL certificate renewed successfully!', 'success');
        }, 3000);
    }

    function uploadSSL() {
        showToast('SSL upload feature ready', 'info');
    }

    function clearCache() {
        showToast('Clearing cache...', 'info');
        setTimeout(() => {
            showToast('All cache cleared successfully!', 'success');
        }, 2000);
    }

    function optimizeDatabase() {
        showToast('Optimizing database...', 'info');
        setTimeout(() => {
            showToast('Database optimized successfully!', 'success');
        }, 3000);
    }

    function toggleMaintenanceMode() {
        const maintenanceBanner = document.querySelector('.maintenance-banner');
        if (maintenanceBanner) {
            maintenanceBanner.remove();
            showToast('Maintenance mode disabled', 'success');
        }
    }

    function createBackup() {
        showToast('Creating system backup...', 'info');
        setTimeout(() => {
            showToast('System backup created successfully!', 'success');
        }, 5000);
    }

    function restoreBackup(id = null) {
        const message = id ? `Are you sure you want to restore backup #${id}?` : 'Select backup file to restore:';
        if (confirm(message)) {
            showToast('Restoring backup...', 'info');
            setTimeout(() => {
                showToast('Backup restored successfully!', 'success');
            }, 4000);
        }
    }

    function downloadBackup(id) {
        showToast(`Downloading backup #${id}...`, 'info');
    }

    function deleteBackup(id) {
        if (confirm(`Are you sure you want to delete backup #${id}?`)) {
            showToast(`Backup #${id} deleted`, 'success');
        }
    }

    function refreshLogs() {
        showToast('Refreshing logs...', 'info');
    }

    function exportLogs() {
        showToast('Exporting system logs...', 'info');
    }

    function clearLogs() {
        if (confirm('Are you sure you want to clear all logs?')) {
            showToast('System logs cleared', 'success');
        }
    }

    function installUpdate() {
        if (confirm('Are you sure you want to install the system update? This may require a few minutes of downtime.')) {
            showToast('Installing system update...', 'info');
            setTimeout(() => {
                showToast('System update installed successfully!', 'success');
            }, 8000);
        }
    }

    // Utility functions
    function showToast(message, type = 'info') {
        console.log(`[${type.toUpperCase()}] ${message}`);
        
        const toast = document.createElement('div');
        toast.className = `fixed top-4 right-4 z-50 px-6 py-4 rounded-lg text-white ${
            type === 'success' ? 'bg-green-500' : 
            type === 'error' ? 'bg-red-500' : 
            type === 'warning' ? 'bg-yellow-500' : 'bg-blue-500'
        }`;
        toast.textContent = message;
        
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
    }

    // Make functions globally available
    window.switchTab = switchTab;
    window.saveAllSettings = saveAllSettings;
    window.backupSettings = backupSettings;
    window.restoreDefaults = restoreDefaults;
    window.exportConfig = exportConfig;
    window.testEmail = testEmail;
    window.toggleApiKeyVisibility = toggleApiKeyVisibility;
    window.regenerateApiKey = regenerateApiKey;
    window.copyApiKey = copyApiKey;
    window.renewSSL = renewSSL;
    window.uploadSSL = uploadSSL;
    window.clearCache = clearCache;
    window.optimizeDatabase = optimizeDatabase;
    window.toggleMaintenanceMode = toggleMaintenanceMode;
    window.createBackup = createBackup;
    window.restoreBackup = restoreBackup;
    window.downloadBackup = downloadBackup;
    window.deleteBackup = deleteBackup;
    window.refreshLogs = refreshLogs;
    window.exportLogs = exportLogs;
    window.clearLogs = clearLogs;
    window.installUpdate = installUpdate;

</script>

</body>
</html>