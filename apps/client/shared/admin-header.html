<!-- Admin Header Navigation -->
<nav class="fixed top-0 left-0 right-0 z-40 bg-white shadow-lg border-b border-gray-200">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <!-- Logo and Brand -->
      <div class="flex items-center">
        <a href="/admin/dashboard.html" class="flex items-center">
          <img src="/public/images/logo.png" alt="ADD Logo" class="h-8 w-8 mr-3">
          <span class="text-xl font-bold text-gray-900">ADD Admin</span>
        </a>
      </div>

      <!-- Navigation Links -->
      <div class="hidden md:flex items-center space-x-8">
        <a href="/admin/dashboard.html" class="nav-link">
          <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
        </a>
        <a href="/admin/user-management.html" class="nav-link">
          <i class="fas fa-users mr-2"></i>Users
        </a>
        <a href="/admin/orders.html" class="nav-link">
          <i class="fas fa-shopping-cart mr-2"></i>Orders
        </a>
        <a href="/admin/products.html" class="nav-link">
          <i class="fas fa-box mr-2"></i>Products
        </a>
        <a href="/admin/agents.html" class="nav-link">
          <i class="fas fa-truck mr-2"></i>Agents
        </a>
        <a href="/admin/sellers.html" class="nav-link">
          <i class="fas fa-store mr-2"></i>Sellers
        </a>
      </div>

      <!-- User Menu -->
      <div class="flex items-center">
        <div class="relative">
          <button id="user-menu-button" class="flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500" onclick="showNotification('Feature in development', 'info')">
            <div class="h-8 w-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold mr-3">
              A
            </div>
            <span class="hidden md:block text-gray-700 font-medium" id="admin-name">Admin</span>
            <i class="fas fa-chevron-down ml-2 text-gray-400"></i>
          </button>
          
          <!-- Dropdown Menu -->
          <div id="user-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50">
            <a href="/admin/profile.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
              <i class="fas fa-user mr-2"></i>Profile
            </a>
            <a href="/admin/settings.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
              <i class="fas fa-cog mr-2"></i>Settings
            </a>
            <hr class="my-2">
            <button onclick="logout()" class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50">
              <i class="fas fa-sign-out-alt mr-2"></i>Sign Out
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>

<style>
.nav-link {
  @apply text-gray-600 hover:text-blue-600 font-medium transition-colors duration-200;
}

.nav-link.active {
  @apply text-blue-600 border-b-2 border-blue-600;
}
</style>

<script>
// Admin header functionality
document.addEventListener('DOMContentLoaded', function() {
  // Set active navigation link
  const currentPath = window.location.pathname;
  const navLinks = document.querySelectorAll('.nav-link');
  
  navLinks.forEach(link => {
    if (link.getAttribute('href') === currentPath) {
      link.classList.add('active');
    }
  });

  // Update admin name
  const authResult = window.currentAuth || safeAuthCheck();
  if (authResult && authResult.user) {
    const adminNameElement = document.getElementById('admin-name');
    const userButton = document.querySelector('#user-menu-button div');
    
    if (adminNameElement) {
      adminNameElement.textContent = authResult.user.name || 'Admin';
    }
    
    if (userButton && authResult.user.name) {
      userButton.textContent = authResult.user.name.charAt(0).toUpperCase();
    }
  }

  // User menu dropdown
  const userMenuButton = document.getElementById('user-menu-button');
  const userDropdown = document.getElementById('user-dropdown');

  if (userMenuButton && userDropdown) {
    userMenuButton.addEventListener('click', function(e) {
      e.stopPropagation();
      userDropdown.classList.toggle('hidden');
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', function() {
      userDropdown.classList.add('hidden');
    });
  }
});

// Logout function
function logout() {
  if (confirm('Are you sure you want to sign out?')) {
    localStorage.removeItem('token');
    localStorage.removeItem('user');
    window.location.href = '/auth/auth-admin.html';
  }
}
</script>
<script>
// Utility Functions for Enhanced Functionality
function showNotification(message, type = 'info') {
    // Create notification element
    const notification = document.createElement('div');
    notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ${
        type === 'success' ? 'bg-green-500 text-white' :
        type === 'error' ? 'bg-red-500 text-white' :
        type === 'warning' ? 'bg-yellow-500 text-black' :
        'bg-blue-500 text-white'
    }`;
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    // Remove after 3 seconds
    setTimeout(() => {
        notification.style.opacity = '0';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// Generic search handlers
function handleProductSearch(query) {
    console.log('Searching products:', query);
    if (query.length > 2) {
        // Implement product search logic
        showNotification('Searching for: ' + query, 'info');
    }
}

function handleSellerSearch(query) {
    console.log('Searching sellers:', query);
    if (query.length > 2) {
        showNotification('Searching sellers: ' + query, 'info');
    }
}

function handleAgentSearch(query) {
    console.log('Searching agents:', query);
    if (query.length > 2) {
        showNotification('Searching agents: ' + query, 'info');
    }
}

function handleOrderSearch(query) {
    console.log('Searching orders:', query);
    if (query.length > 2) {
        showNotification('Searching orders: ' + query, 'info');
    }
}

function handleUserSearch(query) {
    console.log('Searching users:', query);
    if (query.length > 2) {
        showNotification('Searching users: ' + query, 'info');
    }
}

// Generic form handlers
function handleSave() {
    showNotification('Save functionality will be implemented soon', 'info');
}

function handleEdit() {
    showNotification('Edit functionality will be implemented soon', 'info');
}

function handleDelete() {
    if (confirm('Are you sure you want to delete this item?')) {
        showNotification('Delete functionality will be implemented soon', 'info');
    }
}

function handleCancel() {
    if (confirm('Are you sure you want to cancel? Unsaved changes will be lost.')) {
        history.back();
    }
}
</script>