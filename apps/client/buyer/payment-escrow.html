<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment & Escrow - ADD Physical Products</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="buyers-home.html" class="text-blue-600 hover:text-blue-800">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </a>
                </div>
                <h1 class="text-xl font-semibold text-gray-900">Payment & Escrow</h1>
                <div class="flex items-center space-x-4">
                    <div class="text-right">
                        <p class="text-sm text-gray-600">Wallet Balance</p>
                        <p id="walletBalance" class="text-lg font-bold text-green-600">$0.00</p>
                    </div>
                    <button id="topUpBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                        <i class="fas fa-plus mr-2"></i>Top Up
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Wallet Overview -->
        <div class="bg-white rounded-lg shadow-sm border mb-8">
            <div class="p-6 border-b">
                <h2 class="text-lg font-semibold text-gray-900">Wallet Overview</h2>
            </div>
            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-wallet text-green-600 text-2xl"></i>
                        </div>
                        <p class="text-sm text-gray-600">Available Balance</p>
                        <p id="availableBalance" class="text-2xl font-bold text-gray-900">$0.00</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-lock text-yellow-600 text-2xl"></i>
                        </div>
                        <p class="text-sm text-gray-600">In Escrow</p>
                        <p id="escrowBalance" class="text-2xl font-bold text-gray-900">$0.00</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-history text-blue-600 text-2xl"></i>
                        </div>
                        <p class="text-sm text-gray-600">Total Spent</p>
                        <p id="totalSpent" class="text-2xl font-bold text-gray-900">$0.00</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Active Escrows -->
        <div class="bg-white rounded-lg shadow-sm border mb-8">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 class="text-lg font-semibold text-gray-900">Active Escrows</h2>
                    <button id="refreshEscrowsBtn" class="text-blue-600 hover:text-blue-800">
                        <i class="fas fa-sync-alt mr-1"></i>Refresh
                    </button>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Order</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Seller</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Held Since</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="escrowTableBody" class="bg-white divide-y divide-gray-200">
                        <!-- Escrow records will be loaded here -->
                    </tbody>
                </table>
            </div>
            <div id="noEscrowsMessage" class="text-center py-12 hidden">
                <i class="fas fa-shield-alt text-gray-400 text-4xl mb-4"></i>
                <p class="text-gray-500">No active escrows</p>
                <p class="text-sm text-gray-400">Your payment protections will appear here</p>
            </div>
        </div>

        <!-- Transaction History -->
        <div class="bg-white rounded-lg shadow-sm border">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 class="text-lg font-semibold text-gray-900">Transaction History</h2>
                    <div class="flex space-x-2">
                        <select id="transactionTypeFilter" class="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                            <option value="">All Types</option>
                            <option value="payment">Payment</option>
                            <option value="hold">Hold</option>
                            <option value="release">Release</option>
                            <option value="refund">Refund</option>
                        </select>
                        <button id="applyTransactionFilterBtn" class="bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm">
                            Filter
                        </button>
                    </div>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Order</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                        </tr>
                    </thead>
                    <tbody id="transactionTableBody" class="bg-white divide-y divide-gray-200">
                        <!-- Transaction records will be loaded here -->
                    </tbody>
                </table>
            </div>
            <div id="noTransactionsMessage" class="text-center py-12 hidden">
                <i class="fas fa-receipt text-gray-400 text-4xl mb-4"></i>
                <p class="text-gray-500">No transactions yet</p>
                <p class="text-sm text-gray-400">Your payment history will appear here</p>
            </div>
        </div>
    </div>

    <!-- Top Up Modal -->
    <div id="topUpModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
                <div class="p-6 border-b">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-gray-900">Top Up Wallet</h3>
                        <button id="closeTopUpModalBtn" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <form id="topUpForm" class="p-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Amount</label>
                            <div class="relative">
                                <span class="absolute left-3 top-2 text-gray-500">$</span>
                                <input type="number" id="topUpAmount" class="w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="0.00" min="1" max="1000" step="0.01" required>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Payment Method</label>
                            <select id="paymentMethod" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                                <option value="">Select payment method</option>
                                <option value="credit-card">Credit Card</option>
                                <option value="debit-card">Debit Card</option>
                                <option value="bank-transfer">Bank Transfer</option>
                                <option value="mobile-money">Mobile Money</option>
                            </select>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="flex">
                                <i class="fas fa-info-circle text-blue-600 mt-0.5 mr-3"></i>
                                <div class="text-sm text-blue-800">
                                    <p class="font-medium">Secure Payment</p>
                                    <p>Your payment information is encrypted and secure. Funds will be available immediately.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-3 mt-6">
                        <button type="button" id="cancelTopUpBtn" class="px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors">Cancel</button>
                        <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">Add Funds</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Release Payment Modal -->
    <div id="releasePaymentModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
                <div class="p-6 border-b">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-gray-900">Release Payment</h3>
                        <button id="closeReleaseModalBtn" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <form id="releasePaymentForm" class="p-6">
                    <div class="space-y-4">
                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <div class="flex">
                                <i class="fas fa-exclamation-triangle text-yellow-600 mt-0.5 mr-3"></i>
                                <div class="text-sm text-yellow-800">
                                    <p class="font-medium">Confirm Delivery</p>
                                    <p>Only release payment after you have received your order in good condition.</p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Order Details</label>
                            <div id="releaseOrderDetails" class="bg-gray-50 p-3 rounded-lg text-sm">
                                <!-- Order details will be populated here -->
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Release Reason</label>
                            <textarea id="releaseReason" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" rows="3" placeholder="Order received in good condition" required></textarea>
                        </div>
                        <input type="hidden" id="releaseOrderId">
                    </div>
                    <div class="flex justify-end space-x-3 mt-6">
                        <button type="button" id="cancelReleaseBtn" class="px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors">Cancel</button>
                        <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">Release Payment</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 flex items-center space-x-3">
            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div>
            <span class="text-gray-700">Loading...</span>
        </div>
    </div>

    <script>
        // Global variables
        let currentEscrows = [];
        let currentTransactions = [];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadWalletBalance();
            loadActiveEscrows();
            loadTransactionHistory();
            setupEventListeners();
        });

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('topUpBtn').addEventListener('click', showTopUpModal);
            document.getElementById('closeTopUpModalBtn').addEventListener('click', hideTopUpModal);
            document.getElementById('cancelTopUpBtn').addEventListener('click', hideTopUpModal);
            document.getElementById('topUpForm').addEventListener('submit', topUpWallet);

            document.getElementById('closeReleaseModalBtn').addEventListener('click', hideReleaseModal);
            document.getElementById('cancelReleaseBtn').addEventListener('click', hideReleaseModal);
            document.getElementById('releasePaymentForm').addEventListener('submit', releasePayment);

            document.getElementById('refreshEscrowsBtn').addEventListener('click', loadActiveEscrows);
            document.getElementById('applyTransactionFilterBtn').addEventListener('click', applyTransactionFilter);
        }

        // Load wallet balance
        function loadWalletBalance() {
            fetch('/api/payment-escrow/wallet/balance', {
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const balance = parseFloat(data.balance || 0);
                    document.getElementById('walletBalance').textContent = `$${balance.toFixed(2)}`;
                    document.getElementById('availableBalance').textContent = `$${balance.toFixed(2)}`;
                }
            })
            .catch(error => {
                console.error('Error loading wallet balance:', error);
            });
        }

        // Load active escrows
        function loadActiveEscrows() {
            showLoading();
            // This would need to be implemented in the backend
            fetch('/api/orders?status=held', {
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                }
            })
            .then(response => response.json())
            .then(data => {
                hideLoading();
                if (data.success) {
                    displayActiveEscrows(data.orders || []);
                }
            })
            .catch(error => {
                hideLoading();
                console.error('Error loading escrows:', error);
            });
        }

        // Display active escrows
        function displayActiveEscrows(escrows) {
            const tbody = document.getElementById('escrowTableBody');
            const noEscrowsMsg = document.getElementById('noEscrowsMessage');
            
            if (escrows.length === 0) {
                tbody.innerHTML = '';
                noEscrowsMsg.classList.remove('hidden');
                return;
            }
            
            noEscrowsMsg.classList.add('hidden');
            tbody.innerHTML = '';
            
            let totalEscrow = 0;
            
            escrows.forEach(escrow => {
                totalEscrow += parseFloat(escrow.total || 0);
                
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">#${escrow.order_number}</div>
                        <div class="text-sm text-gray-500">Order ID: ${escrow.id}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${escrow.seller_name || 'Unknown'}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">$${parseFloat(escrow.total || 0).toFixed(2)}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getPaymentStatusColor(escrow.payment_status)}">
                            ${(escrow.payment_status || 'pending').toUpperCase()}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        ${new Date(escrow.created_at).toLocaleDateString()}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        ${escrow.status === 'delivered' ? `
                            <button onclick="showReleaseModal(${escrow.id}, '${escrow.order_number}', ${escrow.total})" class="text-green-600 hover:text-green-900 mr-3">
                                <i class="fas fa-unlock mr-1"></i>Release
                            </button>
                        ` : ''}
                        <button onclick="viewEscrowDetails(${escrow.id})" class="text-blue-600 hover:text-blue-900">
                            <i class="fas fa-eye mr-1"></i>View
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            document.getElementById('escrowBalance').textContent = `$${totalEscrow.toFixed(2)}`;
        }

        // Get payment status color
        function getPaymentStatusColor(status) {
            switch (status) {
                case 'held':
                    return 'bg-yellow-100 text-yellow-800';
                case 'released':
                    return 'bg-green-100 text-green-800';
                case 'refunded':
                    return 'bg-red-100 text-red-800';
                default:
                    return 'bg-gray-100 text-gray-800';
            }
        }

        // Load transaction history
        function loadTransactionHistory() {
            const typeFilter = document.getElementById('transactionTypeFilter').value;
            const params = new URLSearchParams();
            if (typeFilter) params.append('type', typeFilter);
            
            fetch(`/api/payment-escrow/transactions?${params}`, {
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    displayTransactionHistory(data.transactions || []);
                    calculateTotalSpent(data.transactions || []);
                }
            })
            .catch(error => {
                console.error('Error loading transactions:', error);
            });
        }

        // Display transaction history
        function displayTransactionHistory(transactions) {
            const tbody = document.getElementById('transactionTableBody');
            const noTransactionsMsg = document.getElementById('noTransactionsMessage');
            
            if (transactions.length === 0) {
                tbody.innerHTML = '';
                noTransactionsMsg.classList.remove('hidden');
                return;
            }
            
            noTransactionsMsg.classList.add('hidden');
            tbody.innerHTML = '';
            
            transactions.forEach(transaction => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getTransactionTypeColor(transaction.transaction_type)}">
                            ${transaction.transaction_type.toUpperCase()}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${transaction.order_number || '-'}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium ${transaction.transaction_type === 'payment' || transaction.transaction_type === 'hold' ? 'text-red-600' : 'text-green-600'}">
                            ${transaction.transaction_type === 'payment' || transaction.transaction_type === 'hold' ? '-' : '+'}$${parseFloat(transaction.amount || 0).toFixed(2)}
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getTransactionStatusColor(transaction.status)}">
                            ${transaction.status.toUpperCase()}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        ${transaction.description || '-'}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        ${new Date(transaction.created_at).toLocaleDateString()}
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Get transaction type color
        function getTransactionTypeColor(type) {
            switch (type) {
                case 'payment':
                    return 'bg-blue-100 text-blue-800';
                case 'hold':
                    return 'bg-yellow-100 text-yellow-800';
                case 'release':
                    return 'bg-green-100 text-green-800';
                case 'refund':
                    return 'bg-red-100 text-red-800';
                default:
                    return 'bg-gray-100 text-gray-800';
            }
        }

        // Get transaction status color
        function getTransactionStatusColor(status) {
            switch (status) {
                case 'completed':
                    return 'bg-green-100 text-green-800';
                case 'pending':
                    return 'bg-yellow-100 text-yellow-800';
                case 'failed':
                    return 'bg-red-100 text-red-800';
                default:
                    return 'bg-gray-100 text-gray-800';
            }
        }

        // Calculate total spent
        function calculateTotalSpent(transactions) {
            const totalSpent = transactions
                .filter(t => t.transaction_type === 'payment' && t.status === 'completed')
                .reduce((sum, t) => sum + parseFloat(t.amount || 0), 0);
            
            document.getElementById('totalSpent').textContent = `$${totalSpent.toFixed(2)}`;
        }

        // Apply transaction filter
        function applyTransactionFilter() {
            loadTransactionHistory();
        }

        // Show top up modal
        function showTopUpModal() {
            document.getElementById('topUpModal').classList.remove('hidden');
        }

        // Hide top up modal
        function hideTopUpModal() {
            document.getElementById('topUpModal').classList.add('hidden');
            document.getElementById('topUpForm').reset();
        }

        // Top up wallet
        function topUpWallet(e) {
            e.preventDefault();
            
            const amount = parseFloat(document.getElementById('topUpAmount').value);
            const paymentMethod = document.getElementById('paymentMethod').value;
            
            if (!amount || amount <= 0) {
                showNotification('Please enter a valid amount', 'error');
                return;
            }
            
            showLoading();
            fetch('/api/payment-escrow/wallet/topup', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                },
                body: JSON.stringify({ amount, payment_method: paymentMethod })
            })
            .then(response => response.json())
            .then(data => {
                hideLoading();
                if (data.success) {
                    showNotification('Wallet topped up successfully', 'success');
                    hideTopUpModal();
                    loadWalletBalance();
                    loadTransactionHistory();
                } else {
                    showNotification(data.message || 'Failed to top up wallet', 'error');
                }
            })
            .catch(error => {
                hideLoading();
                console.error('Error topping up wallet:', error);
                showNotification('Failed to top up wallet', 'error');
            });
        }

        // Show release modal
        function showReleaseModal(orderId, orderNumber, amount) {
            document.getElementById('releaseOrderId').value = orderId;
            document.getElementById('releaseOrderDetails').innerHTML = `
                <p><strong>Order:</strong> #${orderNumber}</p>
                <p><strong>Amount:</strong> $${parseFloat(amount).toFixed(2)}</p>
            `;
            document.getElementById('releasePaymentModal').classList.remove('hidden');
        }

        // Hide release modal
        function hideReleaseModal() {
            document.getElementById('releasePaymentModal').classList.add('hidden');
            document.getElementById('releasePaymentForm').reset();
        }

        // Release payment
        function releasePayment(e) {
            e.preventDefault();
            
            const orderId = document.getElementById('releaseOrderId').value;
            const releaseReason = document.getElementById('releaseReason').value;
            
            showLoading();
            fetch('/api/payment-escrow/release', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                },
                body: JSON.stringify({ order_id: orderId, release_reason: releaseReason })
            })
            .then(response => response.json())
            .then(data => {
                hideLoading();
                if (data.success) {
                    showNotification('Payment released successfully', 'success');
                    hideReleaseModal();
                    loadActiveEscrows();
                    loadTransactionHistory();
                } else {
                    showNotification(data.message || 'Failed to release payment', 'error');
                }
            })
            .catch(error => {
                hideLoading();
                console.error('Error releasing payment:', error);
                showNotification('Failed to release payment', 'error');
            });
        }

        // View escrow details
        function viewEscrowDetails(orderId) {
            window.open(`order-detail.html?id=${orderId}`, '_blank');
        }

        // Utility functions
        function showLoading() {
            document.getElementById('loadingOverlay').classList.remove('hidden');
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').classList.add('hidden');
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-500 text-white' :
                type === 'error' ? 'bg-red-500 text-white' :
                'bg-blue-500 text-white'
            }`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${
                        type === 'success' ? 'fa-check-circle' :
                        type === 'error' ? 'fa-exclamation-circle' :
                        'fa-info-circle'
                    } mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    </script>
</body>
</html>