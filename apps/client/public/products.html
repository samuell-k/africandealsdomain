<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Public Products Page | ADD Physical Products</title>
  <meta name="description" content="Public Products Page - Physical Products platform for African e-commerce">
  <link rel="icon" type="image/png" href="/public/images/logo.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/shared/auth-utils.js"></script>
  
  <style>
    body { font-family: 'Inter', sans-serif; }
    .glass { background: rgba(255,255,255,0.9); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); }
    .brand-gradient { background: linear-gradient(135deg, #0e2038 0%, #23325c 50%, #1e3a8a 100%); }
    .footer-link:hover { text-decoration: underline; }
    .footer-icon { transition: transform 0.2s; }
    .footer-icon:hover { transform: scale(1.15); }
    .category-card:hover { box-shadow: 0 8px 32px 0 rgba(14,32,56,0.15); transform: translateY(-4px) scale(1.02); }
    .product-card:hover { box-shadow: 0 12px 40px 0 rgba(14,32,56,0.12); transform: translateY(-6px); }
    .fade-in { animation: fadeIn 0.6s ease-out; }
    .slide-up { animation: slideUp 0.8s ease-out; }
    .pulse-glow { animation: pulseGlow 2s infinite; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulseGlow { 0%, 100% { box-shadow: 0 0 20px rgba(14,32,56,0.1); } 50% { box-shadow: 0 0 30px rgba(14,32,56,0.2); } }
    .country-flag { width: 24px; height: 16px; object-fit: cover; border-radius: 2px; }
    .currency-badge { background: linear-gradient(135deg, #fbbf24, #f59e0b); }
    .loading-shimmer { background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
    @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
    
    /* Enhanced Responsive Design */
    @media (max-width: 640px) { 
      .hide-mobile { display: none; }
      .text-5xl { font-size: 2.5rem !important; }
      .text-7xl { font-size: 3rem !important; }
      .py-16 { padding-top: 3rem !important; padding-bottom: 3rem !important; }
      .py-24 { padding-top: 4rem !important; padding-bottom: 4rem !important; }
      .gap-4 { gap: 0.75rem !important; }
      .px-8 { padding-left: 1rem !important; padding-right: 1rem !important; }
      .max-w-7xl { padding-left: 1rem; padding-right: 1rem; }
      .container { padding-left: 1rem; padding-right: 1rem; }
    }
    
    @media (max-width: 768px) {
      .grid-cols-2 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
      .grid-cols-3 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .grid-cols-4 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .grid-cols-6 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
      .text-2xl { font-size: 1.5rem; }
      .text-3xl { font-size: 1.875rem; }
    }
    
    @media (min-width: 1024px) {
      .lg\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
      .lg\:grid-cols-6 { grid-template-columns: repeat(6, minmax(0, 1fr)); }
    }
    
    /* WhatsApp Floating Button */
    .whatsapp-float { 
      position: fixed; bottom: 20px; right: 20px; z-index: 1000; 
      background: #25D366; width: 60px; height: 60px; border-radius: 50%; 
      display: flex; align-items: center; justify-content: center; 
      box-shadow: 0 4px 16px rgba(37, 211, 102, 0.3); 
      transition: all 0.3s ease; cursor: pointer; 
    }
    .whatsapp-float:hover { 
      transform: scale(1.1); 
      box-shadow: 0 6px 24px rgba(37, 211, 102, 0.5); 
    }
    
    /* Share Button Animation */
    .share-btn {
      position: relative;
      overflow: hidden;
    }
    
    .share-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(59, 130, 246, 0.3);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.3s, height 0.3s;
    }
    
    .share-btn:hover::before {
      width: 100px;
      height: 100px;
    }

    /* Dynamic Floating Messages */
    .floating-message {
      position: fixed;
      bottom: 100px;
      right: 80px;
      background: linear-gradient(135deg, #25d366 0%, #128c7e 100%);
      color: white;
      padding: 12px 16px;
      border-radius: 20px 20px 4px 20px;
      box-shadow: 0 4px 20px rgba(37, 211, 102, 0.3);
      font-size: 14px;
      font-weight: 500;
      max-width: 280px;
      z-index: 999;
      opacity: 0;
      transform: translateX(100px) scale(0.8);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      cursor: pointer;
      line-height: 1.4;
    }

    .floating-message.show {
      opacity: 1;
      transform: translateX(0) scale(1);
      animation: messageEntrance 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes messageEntrance {
      0% {
        opacity: 0;
        transform: translateX(100px) scale(0.8) rotate(5deg);
      }
      60% {
        opacity: 1;
        transform: translateX(-10px) scale(1.05) rotate(-1deg);
      }
      100% {
        opacity: 1;
        transform: translateX(0) scale(1) rotate(0deg);
      }
    }

    .floating-message.hide {
      opacity: 0;
      transform: translateX(100px) scale(0.8);
    }

    .floating-message::before {
      content: '';
      position: absolute;
      bottom: -8px;
      right: 20px;
      width: 0;
      height: 0;
      border-left: 8px solid transparent;
      border-right: 8px solid transparent;
      border-top: 8px solid #25d366;
      transform: rotate(45deg);
    }

    .floating-message:hover {
      transform: translateX(-5px) scale(1.02);
      box-shadow: 0 6px 25px rgba(37, 211, 102, 0.4);
    }

    /* Message close button */
    .message-close {
      position: absolute;
      top: -8px;
      right: -8px;
      width: 20px;
      height: 20px;
      background: #ff4444;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .message-close:hover {
      background: #cc0000;
      transform: scale(1.1);
    }

    /* Pulsing dot indicator */
    .message-indicator {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 12px;
      height: 12px;
      background: #ff4444;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.3);
        opacity: 0.7;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    /* Mobile responsive */
    @media (max-width: 768px) {
      .floating-message {
        bottom: 80px;
        right: 10px;
        left: 10px;
        max-width: calc(100vw - 20px);
        font-size: 13px;
        padding: 10px 14px;
      }
      
      .floating-message::before {
        right: 30px;
      }
    }
    
    @media (max-width: 640px) {
      .whatsapp-float { width: 50px; height: 50px; bottom: 15px; right: 15px; }
    }
    
    .contact-modal {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5); z-index: 2000; display: none;
      align-items: center; justify-content: center; padding: 1rem;
    }
    .contact-modal-content {
      background: white; padding: 2rem; border-radius: 1rem;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2); max-width: 400px; width: 100%;
      max-height: 90vh; overflow-y: auto;
    }
    
    @media (max-width: 640px) {
      .contact-modal-content { padding: 1.5rem; }
      #share-modal .bg-white { max-width: 95vw !important; margin: 1rem; }
      #share-modal .p-6 { padding: 1rem !important; }
      #share-modal .space-y-3 > button { padding: 0.75rem !important; font-size: 0.875rem; }
    }
    
    /* Categories Sidebar */
    .categories-sidebar {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      padding: 1.5rem;
      height: fit-content;
      position: sticky;
      top: 100px;
    }
    
    .category-item {
      display: flex;
      align-items: center;
      padding: 0.75rem;
      border-radius: 8px;
      transition: all 0.2s;
      cursor: pointer;
      border: 1px solid transparent;
    }
    
    .category-item:hover {
      background: #f3f4f6;
      border-color: #e5e7eb;
      transform: translateX(4px);
    }
    
    .category-item.active {
      background: #dbeafe;
      border-color: #3b82f6;
      color: #1d4ed8;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-white to-indigo-50 min-h-screen marketplace-mode">
  
  <!-- Navigation -->
  <nav class="glass border-b border-blue-100 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <!-- Logo and Brand -->
        <div class="flex items-center space-x-4">
          <a href="/public/index.html" class="flex items-center space-x-2 group">
            <img src="/public/images/logo.png" alt="ADD" class="h-10 w-10 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300">
            <div>
              <h1 class="text-xl font-bold text-gray-900">Physical Products</h1>
              <p class="text-xs text-blue-600">Marketplace</p>
            </div>
          </a>
        </div>
        
        <!-- Navigation Links -->
        <div class="hidden md:flex items-center space-x-6">
          
          <a href="/public/index.html" class="text-gray-600 hover:text-blue-600 transition-colors">Home</a>
          <a href="/public/products.html" class="text-gray-600 hover:text-blue-600 transition-colors">Products</a>
          <a href="/public/categories.html" class="text-gray-600 hover:text-blue-600 transition-colors">Categories</a>
          <a href="/public/about.html" class="text-gray-600 hover:text-blue-600 transition-colors">About</a>
        </div>

        <!-- Auth Buttons for Unsigned Users -->
        <div class="flex items-center space-x-3">
          <a href="/auth/auth-buyer.html" class="text-blue-600 hover:text-blue-700 font-medium transition-colors">
            Sign In
          </a>
          <a href="/auth/auth-buyer.html" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
            Join Now
          </a>
          <a href="/auth/auth-seller.html" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
            Start Selling
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="max-w-7xl mx-auto px-4 py-8">
    
    <!-- Page Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-2">All Products</h1>
      <p class="text-gray-600">Discover amazing products from African sellers</p>
    </div>

    <div class="flex flex-col lg:flex-row gap-8">
      <!-- Categories Sidebar -->
      <div class="lg:w-1/4 mb-8 lg:mb-0">
        <!-- Mobile Categories Toggle -->
        <button id="categories-toggle" class="lg:hidden w-full mb-4 bg-white border-2 border-gray-300 rounded-xl p-3 flex items-center justify-between font-medium text-gray-700 hover:bg-gray-50 transition-colors">
          <span>Browse Categories</span>
          <svg class="w-5 h-5 transform transition-transform" id="categories-toggle-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        
        <div class="categories-sidebar hidden lg:block" id="categories-sidebar">
          <h3 class="text-lg font-bold text-gray-900 mb-4">Categories</h3>
          <div id="categories-list" class="space-y-2">
            <div class="loading-shimmer h-8 rounded mb-2"></div>
            <div class="loading-shimmer h-8 rounded mb-2"></div>
            <div class="loading-shimmer h-8 rounded mb-2"></div>
          </div>
        </div>
      </div>

      <!-- Main Products Content -->
      <div class="lg:w-3/4">
        <!-- Search and Filter Section -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
      <form id="product-search-form" class="flex flex-col md:flex-row gap-4" method="POST" action="#">
        <div class="flex-1">
          <input type="text" id="search-input" name="search" placeholder="Type to search products (min 2 chars)" onkeyup="handleProductSearch(this.value)" 
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
        </div>
        <div class="flex gap-4">
          <select id="category-filter" name="category" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="">All Categories</option>
          </select>
          <select id="price-filter" name="price" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="">Any Price</option>
            <option value="0-50000">FRw 0 - 50,000</option>
            <option value="50000-100000">FRw 50,000 - 100,000</option>
            <option value="100000-500000">FRw 100,000 - 500,000</option>
            <option value="500000+">FRw 500,000+</option>
          </select>
          <button type="submit" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" class="inline mr-2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            Search
          </button>
        </div>
      </form>
    </div>

    <!-- Products Grid -->
    <div id="products-container" class="bg-white rounded-2xl shadow-lg p-8">
      <div id="products-loading" class="text-center py-12">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
        <p class="text-gray-600">Loading products...</p>
      </div>
      
      <div id="products-grid" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        <!-- Products will be loaded here -->
      </div>
      
      <div id="products-empty" class="hidden text-center py-12">
        <div class="text-6xl mb-4">📦</div>
        <h2 class="text-2xl font-bold text-gray-900 mb-4">No Products Found</h2>
        <p class="text-gray-600 mb-6">Try adjusting your search criteria.</p>
        
        <!-- Quick Actions -->
        <div class="flex flex-wrap justify-center gap-4">
          <a href="/public/index.html" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-xl font-medium transition-colors">
            Go to Physical Products Home
          </a>
          <a href="/grocery/local-market-home.html" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-xl font-medium transition-colors">Switch to Local Market</a>
        </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Public page - no user menu needed

    // View product detail
    function viewProduct(productId) {
      window.location.href = '/public/product-detail.html?id=' + productId;
    }

    // Add to cart functionality (for unsigned users, redirect to login)
    function addToCart(productId) {
      const token = localStorage.getItem('token');
      if (!token) {
        showNotification('Please sign in to add products to cart', 'warning');
        setTimeout(() => {
          window.location.href = '/auth/auth-buyer.html';
        }, 1500);
        return;
      }
      
      // If user is signed in, show notification for now
      showNotification('Add to cart feature will be implemented soon!', 'info');
    }

    console.log('Public Products Page page loaded successfully');
  </script>

  <script>
    // Product management functionality
    let currentProducts = [];
    let currentCategories = [];

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Authentication initialized for public/products.html');
      loadCategories();
      loadProducts();
      setupEventListeners();
    });

    // Setup event listeners
    function setupEventListeners() {
      const searchForm = document.getElementById('product-search-form');
      if (searchForm) {
        searchForm.addEventListener('submit', function(e) {
          e.preventDefault();
          loadProducts();
        });
      }

      // Real-time search
      const searchInput = document.getElementById('search-input');
      if (searchInput) {
        let searchTimeout;
        searchInput.addEventListener('input', function() {
          clearTimeout(searchTimeout);
          searchTimeout = setTimeout(() => {
            loadProducts();
          }, 500);
        });
      }

      // Filter changes
      const categoryFilter = document.getElementById('category-filter');
      const priceFilter = document.getElementById('price-filter');
      
      if (categoryFilter) {
        categoryFilter.addEventListener('change', loadProducts);
      }
      if (priceFilter) {
        priceFilter.addEventListener('change', loadProducts);
      }
    }

    // Load categories for filter
    async function loadCategories() {
      try {
        const response = await fetch('http://localhost:3001/api/categories');
        if (!response.ok) {
          throw new Error('HTTP ' + response.status + ': ' + response.statusText);
        }
        
        const data = await response.json();
        console.log('Categories API Response:', data); // Debug log
        
        if (data.success) {
          currentCategories = data.categories || [];
          console.log('Loaded categories:', currentCategories.length); // Debug log
          populateCategoryFilter();
        } else {
          throw new Error(data.error || 'Failed to load categories');
        }
      } catch (error) {
        console.error('Error loading categories:', error);
        showNotification('Failed to load categories: ' + error.message, 'error');
      }
    }

    // Populate category filter dropdown
    function populateCategoryFilter() {
      const categoryFilter = document.getElementById('category-filter');
      if (!categoryFilter) return;

      // Clear existing options except the first one
      while (categoryFilter.children.length > 1) {
        categoryFilter.removeChild(categoryFilter.lastChild);
      }

      currentCategories.forEach(category => {
        const option = document.createElement('option');
        option.value = category.id;
        option.textContent = category.name;
        categoryFilter.appendChild(option);
      });
    }

    // Load products with filters
    async function loadProducts() {
      const loadingEl = document.getElementById('products-loading');
      const gridEl = document.getElementById('products-grid');
      const emptyEl = document.getElementById('products-empty');

      // Show loading state
      loadingEl.classList.remove('hidden');
      gridEl.classList.add('hidden');
      emptyEl.classList.add('hidden');

      try {
        // Build query parameters
        const params = new URLSearchParams();
        
        const search = document.getElementById('search-input')?.value;
        const category = document.getElementById('category-filter')?.value;
        const priceRange = document.getElementById('price-filter')?.value;

        if (search) params.append('search', search);
        if (category) params.append('category_id', category);
        if (priceRange && priceRange !== '') {
          if (priceRange === '500000+') {
            params.append('min_price', '500000');
          } else {
            const [min, max] = priceRange.split('-');
            if (min) params.append('min_price', min);
            if (max) params.append('max_price', max);
          }
        }

        // Add more products per page to show more data
        params.append('limit', '50');
        params.append('page', '1');

        const response = await fetch('http://localhost:3001/api/products?' + params.toString());
        
        if (!response.ok) {
          throw new Error('HTTP ' + response.status + ': ' + response.statusText);
        }

        const data = await response.json();
        console.log('API Response:', data); // Debug log
        
        if (data.success) {
          currentProducts = data.products || [];
          console.log('Loaded products:', currentProducts.length); // Debug log
          displayProducts(currentProducts);
        } else {
          throw new Error(data.error || 'Failed to load products');
        }
      } catch (error) {
        console.error('Error loading products:', error);
        showNotification('Failed to load products: ' + error.message, 'error');
        
        // Show empty state
        const gridEl = document.getElementById('products-grid');
        const emptyEl = document.getElementById('products-empty');
        gridEl.classList.add('hidden');
        emptyEl.classList.remove('hidden');
      } finally {
        loadingEl.classList.add('hidden');
      }
    }

    // Display products in grid
    function displayProducts(products) {
      const gridEl = document.getElementById('products-grid');
      const emptyEl = document.getElementById('products-empty');

      if (!products || products.length === 0) {
        gridEl.classList.add('hidden');
        emptyEl.classList.remove('hidden');
        return;
      }

      gridEl.innerHTML = '';
      
      products.forEach(product => {
        const productCard = createProductCard(product);
        gridEl.appendChild(productCard);
      });

      gridEl.classList.remove('hidden');
      emptyEl.classList.add('hidden');
    }

    // Create product card element
    function createProductCard(product) {
      const card = document.createElement('div');
      card.className = 'bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow cursor-pointer';
      card.onclick = () => viewProduct(product.id);

      // Fix image URL to use proper server path
      const imageUrl = product.main_image ? 
        `http://localhost:3001/uploads/${product.main_image}` : 
        '/public/images/placeholder.jpg';
      const price = parseFloat(product.price) || 0;
      const stock = parseInt(product.stock_quantity) || 0;

      card.innerHTML = `
        <div class="aspect-w-1 aspect-h-1 w-full overflow-hidden bg-gray-200">
          <img src="${imageUrl}" alt="${product.name}" 
               class="h-48 w-full object-cover object-center group-hover:opacity-75"
               onerror="this.src='/public/images/placeholder.jpg'">
        </div>
        <div class="p-4">
          <h3 class="text-sm font-medium text-gray-900 mb-2 line-clamp-2">${product.name}</h3>
          <p class="text-sm text-gray-500 mb-2 line-clamp-2">${product.description || ''}</p>
          <div class="flex items-center justify-between">
            <span class="text-lg font-bold text-blue-600">FRw ${price.toFixed(0)}</span>
            <span class="text-sm text-gray-500">Stock: ${stock}</span>
          </div>
          <div class="mt-3 flex items-center justify-between">
            <span class="text-xs text-gray-400">${product.category_name || 'Uncategorized'}</span>
            <div class="flex gap-2">
              <button onclick="event.stopPropagation(); shareProduct({id: ${product.id}, name: '${product.name}', price: 'FRw ${price.toFixed(0)}', description: '${product.description || ''}', category: '${product.category_name || 'Uncategorized'}', image: '${imageUrl}'})" 
                      class="share-btn border-2 border-blue-300 text-blue-600 px-3 py-1 rounded text-sm hover:border-blue-500 hover:text-blue-700 transition-all duration-300" title="Share Product">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                </svg>
              </button>
              <button onclick="event.stopPropagation(); addToCart(${product.id})" 
                      class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      `;

      return card;
    }

    // View product details
    function viewProduct(productId) {
      window.location.href = '/public/product-detail.html?id=' + productId;
    }

    // Add to cart functionality
    function addToCart(productId) {
      const token = localStorage.getItem('token');
      if (!token) {
        alert('Please login to add items to cart');
        window.location.href = '/auth/auth-buyer.html';
        return;
      }

      // Add to cart logic would go here
      fetch('http://localhost:3001/api/cart/add', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer ' + token
        },
        body: JSON.stringify({
          productId: productId,
          quantity: 1
        })
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          showNotification('Product added to cart!', 'success');
        } else {
          showNotification('Failed to add product to cart', 'error');
        }
      })
      .catch(error => {
        console.error('Error adding to cart:', error);
                
                // Enhanced error reporting
                if (error) {
                    const errorDetails = {
                        message: error.message || 'Unknown error',
                        stack: error.stack,
                        timestamp: new Date().toISOString(),
                        url: window.location.href
                    };
                    
                    console.error('Detailed error information:', errorDetails);
                    
                    // Show user-friendly notification
                    showNotification(
                        error.message || 'An error occurred. Please try again.',
                        'error'
                    );
                }
        showNotification('Error adding product to cart', 'error');
      });
    }

    // Show notification
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${
        type === 'success' ? 'bg-green-500' : 
        type === 'error' ? 'bg-red-500' : 'bg-blue-500'
      } text-white`;
      notification.textContent = message;

      document.body.appendChild(notification);

      setTimeout(() => {
        notification.remove();
      }, 3000);
    }

    // Show error message
    function showError(message) {
      const emptyEl = document.getElementById('products-empty');
      emptyEl.innerHTML = `
        <div class="text-center py-12">
          <div class="text-6xl mb-4">⚠️</div>
          <h2 class="text-2xl font-bold text-gray-900 mb-4">Error Loading Products</h2>
          <p class="text-gray-600 mb-6">${message}</p>
          <button onclick="loadProducts()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
            Try Again
          </button>
        </div>
      `;
      emptyEl.classList.remove('hidden');
    }
  </script>

<script>
// ================================================
// COMPREHENSIVE SEARCH & UTILITY FUNCTIONS
// ================================================


// Product Search Implementation
const handleProductSearch = debounce(async (query) => {
    if (query.length < 2) {
        clearSearchResults('products');
        return;
    }
    
    try {
        showSearchLoading('products');
        const response = await fetch(`/api/products/search?q=${encodeURIComponent(query)}&limit=10`);
        
        if (!response.ok) throw new Error('Search failed');
        
        const data = await response.json();
        displaySearchResults('products', data.products || [], query);
    } catch (error) {
        console.error('Product search error:', error);
        showNotification('Search failed. Please try again.', 'error');
        clearSearchResults('products');
    }
}, 300);

// Enhanced notification system
function showNotification(message, type = 'info', duration = 5000) {
    // Remove existing notifications
    const existing = document.querySelectorAll('.system-notification');
    existing.forEach(n => n.remove());
    
    const notification = document.createElement('div');
    notification.className = `system-notification fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 max-w-sm ${
        type === 'success' ? 'bg-green-500 text-white' :
        type === 'error' ? 'bg-red-500 text-white' :
        type === 'warning' ? 'bg-yellow-500 text-black' :
        'bg-blue-500 text-white'
    }`;
    
    const icon = { success: '✅', error: '❌', warning: '⚠️', info: 'ℹ️' }[type] || 'ℹ️';
    
    notification.innerHTML = `
        <div class="flex items-center space-x-3">
            <span class="text-lg">${icon}</span>
            <div class="flex-1">
                <div class="font-medium">${message}</div>
            </div>
            <button onclick="this.closest('.system-notification').remove()" 
                    class="text-white/80 hover:text-white text-xl leading-none">&times;</button>
        </div>
    `;
    
    document.body.appendChild(notification);
    
    if (duration > 0) {
        setTimeout(() => {
            if (notification.parentElement) {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 300);
            }
        }, duration);
    }
}

// Global error handlers
window.addEventListener('error', (event) => {
    console.error('Global error:', event.error);
    showNotification('An unexpected error occurred', 'error');
});

window.addEventListener('unhandledrejection', (event) => {
    console.error('Unhandled promise rejection:', event.reason);
    showNotification('Operation failed unexpectedly', 'error');
});

// Utility functions for common operations
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

function sanitizeInput(input) {
    return input.replace(/[<>]/g, '').trim();
}

// --- SHARE FUNCTIONALITY ---
function shareProduct(product) {
  // Create and show share modal
  const modal = document.createElement('div');
  modal.id = 'share-modal';
  modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
  modal.innerHTML = `
    <div class="bg-white rounded-2xl shadow-xl p-6 max-w-md mx-4">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-xl font-bold text-gray-900">Share Product</h3>
        <button onclick="closeShareModal()" class="text-gray-400 hover:text-gray-600">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      
      <div class="mb-6">
        <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
          <img src="${product.image}" alt="${product.name}" class="w-12 h-12 object-cover rounded-lg">
          <div>
            <h4 class="font-medium text-gray-900">${product.name}</h4>
            <p class="text-sm text-gray-600">${product.price}</p>
          </div>
        </div>
      </div>
      
      <div class="space-y-3">
        <button onclick="shareToWhatsApp('${product.id}', '${product.name}', '${product.price}', '${product.description}', '${product.category}')" class="w-full flex items-center justify-center space-x-3 p-4 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
          <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.785"/>
          </svg>
          <span>Share on WhatsApp</span>
        </button>
        
        <button onclick="shareToFacebook('${product.name}', '${product.price}')" class="w-full flex items-center justify-center space-x-3 p-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
          <span>Share on Facebook</span>
        </button>
        
        <button onclick="shareToTwitter('${product.name}', '${product.price}')" class="w-full flex items-center justify-center space-x-3 p-4 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
          </svg>
          <span>Share on Twitter</span>
        </button>
        
        <button onclick="copyProductLink()" class="w-full flex items-center justify-center space-x-3 p-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
          </svg>
          <span>Copy Link</span>
        </button>
      </div>
    </div>
  `;
  
  document.body.appendChild(modal);
}

function closeShareModal() {
  const modal = document.getElementById('share-modal');
  if (modal) {
    modal.remove();
  }
}

function shareToWhatsApp(productId, productName, productPrice, productDescription, productCategory) {
  const productUrl = `${window.location.origin}/public/product-detail.html?id=${productId}`;
  const message = `🛍️ *${productName}*

📝 ${productDescription}

💰 *Price:* ${productPrice}
🏷️ *Category:* ${productCategory}

🌍 Available on African Deals Domain - Africa's Premier E-Commerce Platform

🔗 View Details: ${productUrl}

#AfricanDeals #Shopping #${productCategory.replace(/\s+/g, '')}`;

  const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
  window.open(whatsappUrl, '_blank');
  closeShareModal();
}

function shareToFacebook(productName, productPrice) {
  const productUrl = `${window.location.origin}${window.location.pathname}${window.location.search}`;
  const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(productUrl)}&quote=${encodeURIComponent(`Check out ${productName} for ${productPrice} on African Deals Domain!`)}`;
  window.open(facebookUrl, '_blank');
  closeShareModal();
}

function shareToTwitter(productName, productPrice) {
  const productUrl = `${window.location.origin}${window.location.pathname}${window.location.search}`;
  const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(`Amazing deal: ${productName} for ${productPrice}! Check it out on African Deals Domain`)}&url=${encodeURIComponent(productUrl)}&hashtags=AfricanDeals,Shopping,Deals`;
  window.open(twitterUrl, '_blank');
  closeShareModal();
}

function copyProductLink() {
  const productUrl = `${window.location.origin}${window.location.pathname}${window.location.search}`;
  const textArea = document.createElement('textarea');
  textArea.value = productUrl;
  document.body.appendChild(textArea);
  textArea.select();
  document.execCommand('copy');
  document.body.removeChild(textArea);
  
  showNotification('Product link copied to clipboard!', 'success');
  closeShareModal();
}

// --- CATEGORIES FUNCTIONALITY ---
async function loadCategoriesForSidebar() {
  try {
    const response = await fetch('http://localhost:3001/api/categories');
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }
    
    const data = await response.json();
    console.log('Sidebar Categories API Response:', data); // Debug log
    
    const categories = data.success ? data.categories || [] : [];
    console.log('Sidebar categories loaded:', categories.length); // Debug log
    
    const categoriesList = document.getElementById('categories-list');
    if (!categoriesList) {
      console.warn('Categories list element not found');
      return;
    }
    
    categoriesList.innerHTML = '';
    
    categories.forEach(category => {
      const categoryItem = document.createElement('div');
      categoryItem.className = 'category-item';
      categoryItem.innerHTML = `
        <div class="flex items-center space-x-3">
          <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
            <span class="text-blue-600 text-sm font-medium">${category.name.charAt(0)}</span>
          </div>
          <div>
            <h4 class="font-medium text-gray-900">${category.name}</h4>
            <p class="text-sm text-gray-500">${category.products_count || 0} products</p>
          </div>
        </div>
      `;
      
      categoryItem.addEventListener('click', () => {
        document.getElementById('category-filter').value = category.id;
        loadProducts();
      });
      
      categoriesList.appendChild(categoryItem);
    });
  } catch (error) {
    console.error('Error loading categories:', error);
    // Show fallback categories
    const categoriesList = document.getElementById('categories-list');
    categoriesList.innerHTML = `
      <div class="category-item" onclick="document.getElementById('category-filter').value='electronics'; loadProducts();">
        <div class="flex items-center space-x-3">
          <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
            <span class="text-blue-600 text-sm font-medium">E</span>
          </div>
          <div>
            <h4 class="font-medium text-gray-900">Electronics</h4>
            <p class="text-sm text-gray-500">125 products</p>
          </div>
        </div>
      </div>
      <div class="category-item" onclick="document.getElementById('category-filter').value='fashion'; loadProducts();">
        <div class="flex items-center space-x-3">
          <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
            <span class="text-purple-600 text-sm font-medium">F</span>
          </div>
          <div>
            <h4 class="font-medium text-gray-900">Fashion</h4>
            <p class="text-sm text-gray-500">89 products</p>
          </div>
        </div>
      </div>
      <div class="category-item" onclick="document.getElementById('category-filter').value='home'; loadProducts();">
        <div class="flex items-center space-x-3">
          <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
            <span class="text-green-600 text-sm font-medium">H</span>
          </div>
          <div>
            <h4 class="font-medium text-gray-900">Home & Living</h4>
            <p class="text-sm text-gray-500">67 products</p>
          </div>
        </div>
      </div>
    `;
  }
}

// --- CONTACT & WHATSAPP FUNCTIONALITY ---
function openContactModal() {
  const modal = document.getElementById('contact-modal');
  if (modal) {
    modal.style.display = 'flex';
  }
}

function closeContactModal() {
  const modal = document.getElementById('contact-modal');
  if (modal) {
    modal.style.display = 'none';
  }
}

function openWhatsApp() {
  const message = encodeURIComponent("Hello! I'm browsing products on African Deals Domain. Can you help me with more information?");
  const whatsappUrl = `https://wa.me/250788910639?text=${message}`;
  window.open(whatsappUrl, '_blank');
  closeContactModal();
}

function callSeller() {
  window.location.href = 'tel:+250788910639';
  closeContactModal();
}

// --- DYNAMIC FLOATING MESSAGES FUNCTIONALITY ---
let currentMessageIndex = 0;
let messageTimer;
let isMessageVisible = false;
let messageTimeoutId;

const welcomeMessages = [
  {
    text: "👋 Hi there! Welcome to African Deals Domain!",
    icon: "👋"
  },
  {
    text: "🛍️ Looking for something specific? I'm here to help!",
    icon: "🛍️"
  },
  {
    text: "💬 Need assistance with your shopping? Chat with us!",
    icon: "💬"
  },
  {
    text: "🎯 Found the perfect deal? Let me know if you need help!",
    icon: "🎯"
  },
  {
    text: "📞 Have questions? Click here for instant support!",
    icon: "📞"
  },
  {
    text: "✨ Explore thousands of products from African sellers!",
    icon: "✨"
  },
  {
    text: "🚀 Fast delivery and great prices await you!",
    icon: "🚀"
  },
  {
    text: "💝 Special deals just for you! Ask me about them!",
    icon: "💝"
  }
];

function createFloatingMessage(message) {
  const container = document.getElementById('floating-messages-container');
  const messageDiv = document.createElement('div');
  messageDiv.className = 'floating-message';
  messageDiv.innerHTML = `
    <div class="message-close" onclick="hideFloatingMessage()">&times;</div>
    <div style="display: flex; align-items: center; gap: 8px;">
      <span style="font-size: 16px;">${message.icon}</span>
      <span>${message.text}</span>
    </div>
  `;

  // Add click handler to open contact modal
  messageDiv.addEventListener('click', function(e) {
    if (!e.target.classList.contains('message-close')) {
      hideFloatingMessage();
      openContactModal();
    }
  });

  container.appendChild(messageDiv);

  // Show with animation
  setTimeout(() => {
    messageDiv.classList.add('show');
    isMessageVisible = true;
  }, 100);

  return messageDiv;
}

function showNextMessage() {
  if (isMessageVisible) return;

  const message = welcomeMessages[currentMessageIndex];
  const messageElement = createFloatingMessage(message);

  // Show message indicator when message appears
  showMessageIndicator();

  // Auto hide after 6 seconds
  messageTimeoutId = setTimeout(() => {
    if (messageElement && messageElement.parentNode) {
      hideFloatingMessage();
    }
  }, 6000);

  currentMessageIndex = (currentMessageIndex + 1) % welcomeMessages.length;
}

function hideFloatingMessage() {
  const container = document.getElementById('floating-messages-container');
  const activeMessage = container.querySelector('.floating-message.show');
  
  if (activeMessage) {
    activeMessage.classList.remove('show');
    activeMessage.classList.add('hide');
    
    setTimeout(() => {
      if (activeMessage.parentNode) {
        activeMessage.parentNode.removeChild(activeMessage);
      }
      isMessageVisible = false;
    }, 400);

    // Clear timeout if message is manually closed
    if (messageTimeoutId) {
      clearTimeout(messageTimeoutId);
      messageTimeoutId = null;
    }
  }
}

function hideMessageIndicator() {
  const indicator = document.getElementById('message-indicator');
  if (indicator) {
    indicator.style.display = 'none';
  }
}

function showMessageIndicator() {
  const indicator = document.getElementById('message-indicator');
  if (indicator) {
    indicator.style.display = 'block';
  }
}

function startFloatingMessages() {
  // Show first message after 3 seconds
  setTimeout(() => {
    showNextMessage();
  }, 3000);

  // Then show messages every 10 seconds
  messageTimer = setInterval(() => {
    showNextMessage();
  }, 10000);
}

function enhancedOpenContactModal() {
  hideFloatingMessage();
  hideMessageIndicator();
  openContactModal();
}

// Initialize categories sidebar and floating messages
document.addEventListener('DOMContentLoaded', function() {
  loadCategoriesForSidebar();
  startFloatingMessages();
  
  // Mobile categories toggle
  const categoriesToggle = document.getElementById('categories-toggle');
  const categoriesSidebar = document.getElementById('categories-sidebar');
  const categoriesToggleIcon = document.getElementById('categories-toggle-icon');
  
  if (categoriesToggle && categoriesSidebar) {
    categoriesToggle.addEventListener('click', function() {
      const isVisible = !categoriesSidebar.classList.contains('hidden');
      
      if (isVisible) {
        categoriesSidebar.classList.add('hidden');
        categoriesToggleIcon.classList.remove('rotate-180');
      } else {
        categoriesSidebar.classList.remove('hidden');
        categoriesToggleIcon.classList.add('rotate-180');
      }
    });
  }
  
  // Contact modal click outside to close
  const contactModal = document.getElementById('contact-modal');
  if (contactModal) {
    contactModal.addEventListener('click', function(e) {
      if (e.target === contactModal) {
        closeContactModal();
      }
    });
  }
});
</script>

<!-- WhatsApp Floating Button -->
<div class="whatsapp-float" id="whatsapp-button" onclick="enhancedOpenContactModal()">
  <div class="message-indicator" id="message-indicator"></div>
  <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
    <path d="M26.6667 15.7333C26.6667 22.2667 21.5333 27.4 15 27.4C12.9333 27.4 10.9333 26.8 9.2 25.7333L4 27.4L5.66667 22.2C4.53333 20.4 4 18.3333 4 16C4 9.46667 9.13333 4.33334 15.6667 4.33334C22.2 4.33334 26.6667 9.2 26.6667 15.7333ZM15.6667 6.66667C10.4 6.66667 6.33333 10.7333 6.33333 16C6.33333 18 7.06667 19.8667 8.33333 21.3333L7.33333 24.6667L10.8 23.6667C12.2667 24.6667 13.9333 25.0667 15.6667 25.0667C20.9333 25.0667 25 21 25 15.7333C25 10.4667 20.9333 6.66667 15.6667 6.66667ZM21.3333 18.5333C21.3333 18.2667 21.0667 18.1333 20.6667 17.8667C20.2667 17.6 18.6667 16.8 18.2667 16.6667C17.8667 16.5333 17.6 16.4 17.3333 16.8C17.0667 17.2 16.5333 17.8667 16.2667 18.1333C16 18.4 15.7333 18.4 15.3333 18.1333C14.9333 17.8667 13.6 17.4667 12.0667 16.1333C10.8 15 10 13.6 9.73333 13.2C9.46667 12.8 9.73333 12.5333 10 12.2667C10.2667 12 10.5333 11.6 10.8 11.3333C11.0667 11.0667 11.2 10.8 11.3333 10.5333C11.4667 10.2667 11.4 10 11.2 9.73334C11 9.46667 10.2667 7.86667 9.86667 7.06667C9.46667 6.26667 9.06667 6.4 8.8 6.4C8.53333 6.4 8.26667 6.4 8 6.4C7.73333 6.4 7.33333 6.53334 6.93333 6.93334C6.53333 7.33334 5.73333 8.13334 5.73333 9.73334C5.73333 11.3333 6.93333 12.8667 7.2 13.1333C7.46667 13.4 10.0667 17.2 14 18.9333C15.0667 19.3333 15.8667 19.5333 16.5333 19.6667C17.6 20 18.5333 19.9333 19.2667 19.8C20.0667 19.6667 21.3333 18.9333 21.6 18.1333C21.8667 17.3333 21.8667 16.6667 21.7333 16.5333C21.6 16.4 21.3333 16.2667 21.3333 18.5333Z" fill="white"/>
  </svg>
</div>

<!-- Dynamic Floating Messages Container -->
<div id="floating-messages-container"></div>

<!-- Contact Modal -->
<div id="contact-modal" class="contact-modal">
  <div class="contact-modal-content">
    <div class="text-center">
      <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="white">
          <path d="M26.6667 15.7333C26.6667 22.2667 21.5333 27.4 15 27.4C12.9333 27.4 10.9333 26.8 9.2 25.7333L4 27.4L5.66667 22.2C4.53333 20.4 4 18.3333 4 16C4 9.46667 9.13333 4.33334 15.6667 4.33334C22.2 4.33334 26.6667 9.2 26.6667 15.7333Z"/>
        </svg>
      </div>
      <h3 class="text-2xl font-bold text-gray-900 mb-2">Contact Us</h3>
      <p class="text-gray-600 mb-6">Choose how you'd like to get in touch with us</p>
      <div class="space-y-3">
        <button onclick="openWhatsApp()" class="w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2">
          <svg width="20" height="20" viewBox="0 0 32 32" fill="currentColor">
            <path d="M26.6667 15.7333C26.6667 22.2667 21.5333 27.4 15 27.4C12.9333 27.4 10.9333 26.8 9.2 25.7333L4 27.4L5.66667 22.2C4.53333 20.4 4 18.3333 4 16C4 9.46667 9.13333 4.33334 15.6667 4.33334C22.2 4.33334 26.6667 9.2 26.6667 15.7333Z"/>
          </svg>
          WhatsApp Chat
        </button>
        <button onclick="callSeller()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
          </svg>
          Phone Call
        </button>
      </div>
      <button onclick="closeContactModal()" class="mt-4 text-gray-500 hover:text-gray-700 transition-colors">Close</button>
    </div>
  </div>
</div>

</body>
</html>