<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Details | ADD Physical Products</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="/public/images/logo.png">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .glass { background: rgba(255,255,255,0.9); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); }
    .brand-gradient { background: linear-gradient(135deg, #0e2038 0%, #23325c 50%, #1e3a8a 100%); }
    .footer-link:hover { text-decoration: underline; }
    .footer-icon { transition: transform 0.2s; }
    .footer-icon:hover { transform: scale(1.15); }
    .category-card:hover { box-shadow: 0 8px 32px 0 rgba(14,32,56,0.15); transform: translateY(-4px) scale(1.02); }
    .product-card:hover { box-shadow: 0 12px 40px 0 rgba(14,32,56,0.12); transform: translateY(-6px); }
    .fade-in { animation: fadeIn 0.6s ease-out; }
    .slide-up { animation: slideUp 0.8s ease-out; }
    .pulse-glow { animation: pulseGlow 2s infinite; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulseGlow { 0%, 100% { box-shadow: 0 0 20px rgba(14,32,56,0.1); } 50% { box-shadow: 0 0 30px rgba(14,32,56,0.2); } }
    .country-flag { width: 24px; height: 16px; object-fit: cover; border-radius: 2px; }
    .currency-badge { background: linear-gradient(135deg, #fbbf24, #f59e0b); }
    .loading-shimmer { background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
    @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
    
    /* Enhanced Responsive Design */
    @media (max-width: 640px) { 
      .hide-mobile { display: none; }
      .text-5xl { font-size: 2.5rem !important; }
      .text-7xl { font-size: 3rem !important; }
      .py-16 { padding-top: 3rem !important; padding-bottom: 3rem !important; }
      .py-24 { padding-top: 4rem !important; padding-bottom: 4rem !important; }
      .gap-4 { gap: 0.75rem !important; }
      .px-8 { padding-left: 1rem !important; padding-right: 1rem !important; }
      .max-w-7xl { padding-left: 1rem; padding-right: 1rem; }
      .container { padding-left: 1rem; padding-right: 1rem; }
    }
    
    @media (max-width: 768px) {
      .grid-cols-2 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
      .grid-cols-3 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .grid-cols-4 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .grid-cols-6 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
      .text-2xl { font-size: 1.5rem; }
      .text-3xl { font-size: 1.875rem; }
    }
    
    @media (min-width: 1024px) {
      .lg\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
      .lg\:grid-cols-6 { grid-template-columns: repeat(6, minmax(0, 1fr)); }
    }
    
    /* WhatsApp Floating Button */
    .whatsapp-float { 
      position: fixed; bottom: 20px; right: 20px; z-index: 1000; 
      background: #25D366; width: 60px; height: 60px; border-radius: 50%; 
      display: flex; align-items: center; justify-content: center; 
      box-shadow: 0 4px 16px rgba(37, 211, 102, 0.3); 
      transition: all 0.3s ease; cursor: pointer; 
    }
    .whatsapp-float:hover { 
      transform: scale(1.1); 
      box-shadow: 0 6px 24px rgba(37, 211, 102, 0.5); 
    }
    
    /* Share Button Animation */
    .share-btn {
      position: relative;
      overflow: hidden;
    }
    
    .share-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(59, 130, 246, 0.3);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.3s, height 0.3s;
    }
    
    .share-btn:hover::before {
      width: 100px;
      height: 100px;
    }

    /* Dynamic Floating Messages */
    .floating-message {
      position: fixed;
      bottom: 100px;
      right: 80px;
      background: linear-gradient(135deg, #25d366 0%, #128c7e 100%);
      color: white;
      padding: 12px 16px;
      border-radius: 20px 20px 4px 20px;
      box-shadow: 0 4px 20px rgba(37, 211, 102, 0.3);
      font-size: 14px;
      font-weight: 500;
      max-width: 280px;
      z-index: 999;
      opacity: 0;
      transform: translateX(100px) scale(0.8);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      cursor: pointer;
      line-height: 1.4;
    }

    .floating-message.show {
      opacity: 1;
      transform: translateX(0) scale(1);
      animation: messageEntrance 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes messageEntrance {
      0% {
        opacity: 0;
        transform: translateX(100px) scale(0.8) rotate(5deg);
      }
      60% {
        opacity: 1;
        transform: translateX(-10px) scale(1.05) rotate(-1deg);
      }
      100% {
        opacity: 1;
        transform: translateX(0) scale(1) rotate(0deg);
      }
    }

    .floating-message.hide {
      opacity: 0;
      transform: translateX(100px) scale(0.8);
    }

    .floating-message::before {
      content: '';
      position: absolute;
      bottom: -8px;
      right: 20px;
      width: 0;
      height: 0;
      border-left: 8px solid transparent;
      border-right: 8px solid transparent;
      border-top: 8px solid #25d366;
      transform: rotate(45deg);
    }

    .floating-message:hover {
      transform: translateX(-5px) scale(1.02);
      box-shadow: 0 6px 25px rgba(37, 211, 102, 0.4);
    }

    /* Message close button */
    .message-close {
      position: absolute;
      top: -8px;
      right: -8px;
      width: 20px;
      height: 20px;
      background: #ff4444;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .message-close:hover {
      background: #cc0000;
      transform: scale(1.1);
    }

    /* Pulsing dot indicator */
    .message-indicator {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 12px;
      height: 12px;
      background: #ff4444;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.3);
        opacity: 0.7;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    /* Mobile responsive */
    @media (max-width: 768px) {
      .floating-message {
        bottom: 80px;
        right: 10px;
        left: 10px;
        max-width: calc(100vw - 20px);
        font-size: 13px;
        padding: 10px 14px;
      }
      
      .floating-message::before {
        right: 30px;
      }
    }
    
    @media (max-width: 640px) {
      .whatsapp-float { width: 50px; height: 50px; bottom: 15px; right: 15px; }
    }
    
    .contact-modal {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5); z-index: 2000; display: none;
      align-items: center; justify-content: center; padding: 1rem;
    }
    .contact-modal-content {
      background: white; padding: 2rem; border-radius: 1rem;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2); max-width: 400px; width: 100%;
      max-height: 90vh; overflow-y: auto;
    }
    
    @media (max-width: 640px) {
      .contact-modal-content { padding: 1.5rem; }
      #share-modal .bg-white { max-width: 95vw !important; margin: 1rem; }
      #share-modal .p-6 { padding: 1rem !important; }
      #share-modal .space-y-3 > button { padding: 0.75rem !important; font-size: 0.875rem; }
    }
    
    /* Categories Sidebar */
    .categories-sidebar {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      padding: 1.5rem;
      height: fit-content;
      position: sticky;
      top: 100px;
    }
    
    .category-item {
      display: flex;
      align-items: center;
      padding: 0.75rem;
      border-radius: 8px;
      transition: all 0.2s;
      cursor: pointer;
      border: 1px solid transparent;
    }
    
    .category-item:hover {
      background: #f3f4f6;
      border-color: #e5e7eb;
      transform: translateX(4px);
    }
    
    .category-item.active {
      background: #dbeafe;
      border-color: #3b82f6;
      color: #1d4ed8;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="/shared/auth-utils.js"></script>
  
</head>
<body class="bg-gray-50 min-h-screen">
  <!-- Header for Unsigned Users -->
  <header class="w-full glass shadow-lg border-b border-blue-200 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-3 md:py-4">
      <a href="/" class="flex items-center gap-3 group">
        <img src="/public/images/logo.png" alt="ADD Physical Product Logo" class="h-12 w-12 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300" />
        <span class="font-extrabold text-2xl md:text-3xl bg-gradient-to-r from-[#0e2038] to-[#23325c] bg-clip-text text-transparent">ADD Physical Products</span>
      </a>
      <div class="flex items-center gap-2 md:gap-4">

        <!-- Currency Switcher with Real-time Rates -->
        <div class="relative">
          <select id="currency-switcher" class="px-2 md:px-4 py-2 rounded-lg border-2 border-[#0e2038] text-[#0e2038] font-semibold bg-white/95 shadow-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer text-sm md:text-base">
            <option value="RWF" selected>ðŸ‡·ðŸ‡¼ RWF</option>
            <option value="USD">ðŸ‡ºðŸ‡¸ USD</option>
            <option value="EUR">ðŸ‡ªðŸ‡º EUR</option>
            <option value="KES">ðŸ‡°ðŸ‡ª KES</option>
            <option value="NGN">ðŸ‡³ðŸ‡¬ NGN</option>
          </select>
          <div id="currency-rate" class="absolute -bottom-6 left-0 text-xs text-gray-600 bg-white px-2 rounded hidden md:block"></div>
        </div>
        
        <!-- Delivery Picker with Flags -->
        <div class="relative">
          <select id="delivery-country" class="px-2 md:px-4 py-2 rounded-lg border-2 border-[#0e2038] text-[#0e2038] font-semibold bg-white/95 shadow-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer text-sm md:text-base">
            <!-- Countries will be loaded dynamically -->
          </select>
        </div>
        
        <span id="delivery-notice" class="ml-2 font-semibold text-sm text-[#0e2038] flex items-center gap-1">
          <span id="delivery-flag">ðŸ‡·ðŸ‡¼</span>
          <span class="hidden md:inline">Delivering to: <span id="delivery-country-name">Rwanda</span></span>
        </span>
        
        <!-- Auth Buttons -->
        <div class="flex items-center gap-1 md:gap-2">
          <a href="/auth/auth-buyer.html" class="px-2 md:px-4 py-2 rounded-lg font-semibold border-2 border-[#0e2038] text-[#0e2038] bg-white/90 hover:bg-[#0e2038] hover:text-white transition-all duration-300 shadow-md text-xs md:text-sm">Sign In</a>
          <a href="/auth/auth-buyer.html" class="px-2 md:px-4 py-2 rounded-lg font-semibold text-white bg-gradient-to-r from-[#0e2038] to-[#23325c] hover:from-[#23325c] hover:to-[#0e2038] transition-all duration-300 shadow-md text-xs md:text-sm">Create Account</a>
          <a href="/auth/auth-seller.html" class="px-2 md:px-4 py-2 rounded-lg font-semibold border-2 border-green-600 text-green-600 bg-white/90 hover:bg-green-600 hover:text-white transition-all duration-300 shadow-md text-xs md:text-sm">Become a Seller</a>
        </div>
      </div>
    </div>
  </header>

  <main class="pt-16 pb-8">
    <div class="max-w-7xl mx-auto px-4">
      <!-- Loading State -->
      <div id="loading-state" class="text-center py-12">
        <div class="loading-shimmer w-16 h-16 rounded-full mx-auto mb-4"></div>
        <h2 class="text-xl font-semibold text-gray-700 mb-2">Loading Product Details...</h2>
        <p class="text-gray-500">Please wait while we fetch the product information</p>
      </div>

      <!-- Error State -->
      <div id="error-state" class="text-center py-12 hidden">
        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg class="w-8 h-8 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
        </div>
        <h2 class="text-xl font-semibold text-gray-700 mb-2">Product Not Found</h2>
        <p class="text-gray-500 mb-4" id="error-message">The product you're looking for doesn't exist or has been removed.</p>
        <a href="/public/products.html" class="inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Browse All Products</a>
      </div>

      <!-- Product Content -->
      <div id="product-content" class="hidden">
        <!-- Breadcrumb -->
        <nav class="mb-6">
          <ol class="flex items-center space-x-2 text-sm text-gray-600">
            <li><a href="/public/products.html" class="hover:text-blue-600">Products</a></li>
            <li><span class="mx-2">/</span></li>
            <li id="product-category">Category</li>
            <li><span class="mx-2">/</span></li>
            <li class="text-gray-900 font-medium" id="product-name">Product Name</li>
          </ol>
        </nav>

        <div class="flex flex-col lg:flex-row gap-8">
          <!-- Categories Sidebar -->
          <div class="lg:w-1/4 mb-8 lg:mb-0">
            <!-- Mobile Categories Toggle -->
            <button id="categories-toggle" class="lg:hidden w-full mb-4 bg-white border-2 border-gray-300 rounded-xl p-3 flex items-center justify-between font-medium text-gray-700 hover:bg-gray-50 transition-colors">
              <span>Browse Categories</span>
              <svg class="w-5 h-5 transform transition-transform" id="categories-toggle-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            
            <div class="categories-sidebar hidden lg:block" id="categories-sidebar">
              <h3 class="text-lg font-bold text-gray-900 mb-4">Categories</h3>
              <div id="categories-list" class="space-y-2">
                <div class="loading-shimmer h-8 rounded mb-2"></div>
                <div class="loading-shimmer h-8 rounded mb-2"></div>
                <div class="loading-shimmer h-8 rounded mb-2"></div>
              </div>
            </div>
          </div>
          
          <!-- Product Images -->
          <div class="lg:w-1/2">
            <div class="relative">
              <img id="main-product-image" src="/public/images/placeholder.jpg" alt="Product" class="w-full h-96 object-cover rounded-2xl shadow-lg">
              <div id="image-gallery" class="flex gap-2 mt-4 overflow-x-auto">
                <!-- Gallery images will be loaded here -->
              </div>
            </div>
          </div>
          
          <!-- Product Info -->
          <div class="lg:w-1/2">
            <h1 id="product-title" class="text-3xl font-bold text-gray-900 mb-4">Product Title</h1>
            
            <!-- Price Section -->
            <div class="mb-6">
              <div class="flex items-center gap-3 mb-2">
                <span id="product-price" class="text-3xl font-bold text-[#0e2038]">$0.00</span>
                <span id="product-currency" class="text-lg text-gray-600">USD</span>
                <span id="product-discount" class="text-lg text-red-500 font-medium hidden">$0.00</span>
              </div>
              <div id="price-details" class="text-sm text-gray-600">
                <!-- Price details will be shown here -->
              </div>
            </div>

            <!-- Product Description -->
            <div class="mb-6">
              <h3 class="font-semibold text-gray-900 mb-2">Description</h3>
              <p id="product-description" class="text-gray-700 leading-relaxed">Product description will be loaded here...</p>
            </div>

            <!-- Product Details -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
              <h3 class="font-semibold text-gray-900 mb-4">Product Details</h3>
              <div class="grid grid-cols-2 gap-4 text-sm">
                <div>
                  <span class="text-gray-600">Brand:</span>
                  <span id="product-brand" class="ml-2 font-medium">-</span>
                </div>
                <div>
                  <span class="text-gray-600">Condition:</span>
                  <span id="product-condition" class="ml-2 font-medium">-</span>
                </div>
                <div>
                  <span class="text-gray-600">Stock:</span>
                  <span id="product-stock" class="ml-2 font-medium">-</span>
                </div>
                <div>
                  <span class="text-gray-600">Seller:</span>
                  <span id="product-seller" class="ml-2 font-medium">-</span>
                </div>
                <div>
                  <span class="text-gray-600">MOQ:</span>
                  <span id="product-moq" class="ml-2 font-medium">-</span>
                </div>
                <div>
                  <span class="text-gray-600">Category:</span>
                  <span id="product-category-name" class="ml-2 font-medium">-</span>
                </div>
              </div>
            </div>

            <!-- Add to Cart Form -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
              <form id="add-to-cart-form" class="space-y-4" method="POST" action="#">
                <div>
                  <label for="quantity" class="block text-sm font-medium text-gray-700 mb-2">Quantity</label>
                  <div class="flex items-center space-x-3">
                    <button type="button" id="decrease-qty" class="w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50" onclick="showNotification('Feature in development', 'info')">-</button>
                    <input type="number" id="quantity" name="quantity" value="1" min="1" max="999" 
                           class="w-20 text-center border border-gray-300 rounded-lg py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <button type="button" id="increase-qty" class="w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-50" onclick="showNotification('Feature in development', 'info')">+</button>
                    <span id="stock-info" class="text-sm text-gray-500 ml-4">In stock</span>
                  </div>
                </div>
                
                <div class="flex gap-3">
                  <button type="submit" class="flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" class="inline mr-2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.1 5M7 13l-1.1 5m0 0h9.1M16 18a2 2 0 11-4 0 2 2 0 014 0zM9 18a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    Add to Cart
                  </button>
                  <button type="button" id="add-to-wishlist" class="px-6 py-3 border-2 border-gray-300 rounded-lg font-semibold hover:bg-gray-50 transition-colors" onclick="showNotification('Feature in development', 'info')">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" class="inline mr-2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                    </svg>
                    Wishlist
                  </button>
                  <button type="button" id="share-product-btn" class="share-btn px-6 py-3 border-2 border-blue-300 text-blue-600 rounded-lg font-semibold hover:border-blue-500 hover:text-blue-700 transition-all duration-300" onclick="shareCurrentProduct()" title="Share Product">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" class="inline mr-2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                    </svg>
                    Share
                  </button>
                </div>
              </form>
            </div>

            <!-- Call to Action for Sign Up -->
            <div id="signup-cta" class="bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 mb-6 hidden">
              <h3 class="font-semibold text-blue-900 mb-2">Get the Best Deals!</h3>
              <p class="text-blue-700 text-sm mb-4">Sign up to track orders, save favorites, and get exclusive offers.</p>
              <div class="flex gap-3">
                <a href="/auth/auth-buyer.html" class="flex-1 bg-blue-600 text-white px-4 py-3 rounded-lg text-center font-semibold hover:bg-blue-700 transition-colors">Sign Up Now</a>
                <a href="/auth/auth-buyer.html" class="flex-1 border-2 border-blue-600 text-blue-600 px-4 py-3 rounded-lg text-center font-semibold hover:bg-blue-50 transition-colors">Sign In</a>
              </div>
            </div>

            <!-- Contact Seller -->
            <div class="bg-white rounded-xl shadow-lg p-6">
              <h3 class="font-semibold text-gray-900 mb-2">Interested in this product?</h3>
              <p class="text-gray-600 text-sm mb-4">Contact the seller directly to discuss pricing, shipping, and bulk orders.</p>
              <a href="/auth/auth-buyer.html" class="w-full bg-green-600 text-white py-3 rounded-lg text-center font-semibold hover:bg-green-700 transition-colors block">
                Contact Seller
              </a>
            </div>
          </div>
        </div>

        <!-- Product Reviews Section -->
        <div id="product-reviews-section" class="mt-12">
          <h2 class="text-2xl font-bold text-gray-900 mb-6">Customer Reviews</h2>
          
          <!-- Review Summary -->
          <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center space-x-4">
              <div class="text-center">
                <div class="text-3xl font-bold text-gray-900" id="average-rating">0.0</div>
                <div class="flex justify-center space-x-1 mb-2" id="rating-stars">
                  <!-- Stars will be populated by JavaScript -->
                </div>
                <div class="text-sm text-gray-600" id="rating-count">0 reviews</div>
              </div>
              <div class="flex-1">
                <div id="rating-breakdown" class="space-y-2">
                  <!-- Rating breakdown will be populated by JavaScript -->
                </div>
              </div>
            </div>
          </div>
          
          <!-- Add Review Form -->
          <div id="add-review-form" class="bg-white rounded-xl shadow-lg p-6 mb-6 hidden">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Write a Review</h3>
            <form id="review-form" class="space-y-4" method="POST" action="#">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Rating</label>
                <div class="flex space-x-1" id="rating-input">
                  <button type="button" class="star-btn text-2xl text-gray-300 hover:text-yellow-400" data-rating="1" onclick="showNotification('Feature in development', 'info')">â˜…</button>
                  <button type="button" class="star-btn text-2xl text-gray-300 hover:text-yellow-400" data-rating="2" onclick="showNotification('Feature in development', 'info')">â˜…</button>
                  <button type="button" class="star-btn text-2xl text-gray-300 hover:text-yellow-400" data-rating="3" onclick="showNotification('Feature in development', 'info')">â˜…</button>
                  <button type="button" class="star-btn text-2xl text-gray-300 hover:text-yellow-400" data-rating="4" onclick="showNotification('Feature in development', 'info')">â˜…</button>
                  <button type="button" class="star-btn text-2xl text-gray-300 hover:text-yellow-400" data-rating="5" onclick="showNotification('Feature in development', 'info')">â˜…</button>
                </div>
                <input type="hidden" id="selected-rating" name="rating" required pattern=".{1,}" title="This field is required">
              </div>
              <div>
                <label for="review-title" class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                <input type="text" id="review-title" name="title" 
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
              </div>
              <div>
                <label for="review-comment" class="block text-sm font-medium text-gray-700 mb-2">Review</label>
                <textarea id="review-comment" name="comment" rows="4" required
                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea>
              </div>
              <div class="flex justify-end space-x-3">
                <button type="button" id="cancel-review" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50" onclick="handleCancel()">
                  Cancel
                </button>
                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                  Submit Review
                </button>
              </div>
            </form>
          </div>
          
          <!-- Reviews List -->
          <div id="reviews-list" class="space-y-4">
            <!-- Reviews will be populated by JavaScript -->
          </div>
        </div>

        <!-- Related Products Section -->
        <div class="mt-12">
          <h2 class="text-2xl font-bold text-gray-900 mb-6">Related Products</h2>
          <div id="related-products" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- Related products will be loaded here -->
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-8 mt-16">
    <div class="max-w-7xl mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-lg font-semibold mb-4">About ADD</h3>
          <p class="text-gray-300">Africa's premier e-commerce platform connecting buyers with trusted sellers across the continent.</p>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
          <ul class="space-y-2">
            <li><a href="/public/about.html" class="text-gray-300 hover:text-white">About Us</a></li>
            <li><a href="/public/contact.html" class="text-gray-300 hover:text-white">Contact</a></li>
            <li><a href="/public/faq.html" class="text-gray-300 hover:text-white">FAQ</a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-4">Support</h3>
          <ul class="space-y-2">
            <li><a href="/public/shipping-policy.html" class="text-gray-300 hover:text-white">Shipping Policy</a></li>
            <li><a href="/public/returns-policy.html" class="text-gray-300 hover:text-white">Returns Policy</a></li>
            <li><a href="/public/terms-and-conditions.html" class="text-gray-300 hover:text-white">Terms & Conditions</a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-4">Connect</h3>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-300 hover:text-white">Facebook</a>
            <a href="#" class="text-gray-300 hover:text-white">Twitter</a>
            <a href="#" class="text-gray-300 hover:text-white">Instagram</a>
          </div>
        </div>
      </div>
      <div class="border-t border-gray-700 mt-8 pt-8 text-center">
        <p class="text-gray-300">&copy; 2024 ADD Physical Products. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    // Global state
    let currentProduct = null;
    let countries = [];
    let currencyRates = {};
    let selectedCurrency = localStorage.getItem('selectedCurrency') || 'RWF';
    let currentCurrency = selectedCurrency; // Added for compatibility
    let selectedCountry = localStorage.getItem('selectedCountry') || 'Rwanda';

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      loadCountries();
      fetchCurrencyRates();
      loadProduct();
      loadCategories();

      // Currency switcher
      document.getElementById('currency-switcher').addEventListener('change', function(e) {
        selectedCurrency = e.target.value;
        localStorage.setItem('selectedCurrency', selectedCurrency);
        updateCurrencyDisplay();
      });

      // Country switcher
      document.getElementById('delivery-country').addEventListener('change', function(e) {
        selectedCountry = e.target.value;
        localStorage.setItem('selectedCountry', selectedCountry);
        updateDeliveryNotice();
      });

      // Mobile categories toggle
      const categoriesToggle = document.getElementById('categories-toggle');
      const categoriesSidebar = document.getElementById('categories-sidebar');
      const categoriesToggleIcon = document.getElementById('categories-toggle-icon');
      
      if (categoriesToggle && categoriesSidebar) {
        categoriesToggle.addEventListener('click', function() {
          const isVisible = !categoriesSidebar.classList.contains('hidden');
          
          if (isVisible) {
            categoriesSidebar.classList.add('hidden');
            categoriesToggleIcon.classList.remove('rotate-180');
          } else {
            categoriesSidebar.classList.remove('hidden');
            categoriesToggleIcon.classList.add('rotate-180');
          }
        });
      }

      // Set initial values
      document.getElementById('currency-switcher').value = selectedCurrency;
    });

    // Load countries
    async function loadCountries() {
      try {
        const response = await fetch('/public/countries.json');
        if (response.ok) {
          countries = await response.json();
        } else {
          // Fallback countries
          countries = [
            {name: "Rwanda", code: "RW", flag: "https://flagcdn.com/rw.svg"},
            {name: "Kenya", code: "KE", flag: "https://flagcdn.com/ke.svg"},
            {name: "Nigeria", code: "NG", flag: "https://flagcdn.com/ng.svg"},
            {name: "South Africa", code: "ZA", flag: "https://flagcdn.com/za.svg"},
            {name: "Ghana", code: "GH", flag: "https://flagcdn.com/gh.svg"},
            {name: "Uganda", code: "UG", flag: "https://flagcdn.com/ug.svg"},
            {name: "Tanzania", code: "TZ", flag: "https://flagcdn.com/tz.svg"}
          ];
        }
        populateCountrySelect();
      } catch (error) {
        console.error('Error loading countries:', error);
        // Fallback countries
        countries = [
          {name: "Rwanda", code: "RW", flag: "https://flagcdn.com/rw.svg"},
          {name: "Kenya", code: "KE", flag: "https://flagcdn.com/ke.svg"},
          {name: "Nigeria", code: "NG", flag: "https://flagcdn.com/ng.svg"},
          {name: "South Africa", code: "ZA", flag: "https://flagcdn.com/za.svg"},
          {name: "Ghana", code: "GH", flag: "https://flagcdn.com/gh.svg"},
          {name: "Uganda", code: "UG", flag: "https://flagcdn.com/ug.svg"},
          {name: "Tanzania", code: "TZ", flag: "https://flagcdn.com/tz.svg"}
        ];
        console.log('Using fallback countries:', countries.length);
        populateCountrySelect();
      }
    }

    function populateCountrySelect() {
      const select = document.getElementById('delivery-country');
      if (!select) return;
      
      select.innerHTML = countries.map(country => 
        `<option value="${country.name}" data-flag="${country.flag}">${country.name}</option>`
      ).join('');
      
      // Set the selected value and trigger change event
      select.value = selectedCountry;
      updateDeliveryNotice();
    }

    function updateDeliveryNotice() {
      const country = countries.find(c => c.name === selectedCountry);
      if (country) {
        document.getElementById('delivery-flag').innerHTML = '<img src="' + country.flag + '" class="country-flag" alt="' + country.name + '">';
        document.getElementById('delivery-country-name').textContent = country.name;
      }
    }

    function convertCurrency(price, fromCurrency, toCurrency) {
      const numericPrice = parseFloat(price);
      
      if (isNaN(numericPrice)) {
        console.warn('Invalid price for conversion:', price);
        return 0;
      }
      
      // If currencies are the same, return the price as is
      if (fromCurrency === toCurrency) return numericPrice;
      
      // If currency rates are not available, return the original price
      if (!currencyRates[fromCurrency] || !currencyRates[toCurrency]) {
        console.warn('Currency rates not available for:', fromCurrency, 'or', toCurrency);
        return numericPrice;
      }
      
      // Convert through USD
      const usdAmount = numericPrice / currencyRates[fromCurrency];
      return usdAmount * currencyRates[toCurrency];
    }

    // Note: Main updateCurrencyDisplay function is defined later in the file

    // Load product data
    async function loadProduct() {
      const urlParams = new URLSearchParams(window.location.search);
      const productId = urlParams.get('id');
      
      if (!productId) {
        showError('No product ID provided');
        return;
      }

      try {
        const response = await fetch('http://localhost:3001/api/products/' + productId);
        if (!response.ok) {
          throw new Error('HTTP ' + response.status + ': ' + response.statusText);
        }
        
        const data = await response.json();
        console.log('Product API Response:', data); // Debug log
        
        if (data.success) {
          currentProduct = data.product;
          console.log('Loaded product:', currentProduct); // Debug log
          displayProduct(currentProduct);
        } else {
          throw new Error(data.error || 'Failed to load product');
        }
      } catch (error) {
        console.error('Error loading product:', error);
        showError(error.message);
      }
    }

    function displayProduct(product) {
      // Hide loading, show content
      document.getElementById('loading-state')?.classList.add('hidden');
      document.getElementById('product-content')?.classList.remove('hidden');

      // Update product information
      if (document.getElementById('product-title')) {
        document.getElementById('product-title').textContent = product.name || 'Product Name';
      }
      if (document.getElementById('product-name')) {
        document.getElementById('product-name').textContent = product.name || 'Product Name';
      }
      if (document.getElementById('product-description')) {
        document.getElementById('product-description').textContent = product.description || 'No description available';
      }
      
      // Update product details - Enhanced with comprehensive API data
      if (document.getElementById('product-brand')) {
        document.getElementById('product-brand').textContent = product.brand || 'N/A';
      }
      if (document.getElementById('product-condition')) {
        document.getElementById('product-condition').textContent = product.condition || 'New';
      }
      if (document.getElementById('product-stock')) {
        const stockText = product.stock_quantity > 0 ? `${product.stock_quantity} items` : 'Out of stock';
        document.getElementById('product-stock').textContent = stockText;
        document.getElementById('product-stock').className = product.stock_quantity > 0 ? 'ml-2 font-medium text-green-600' : 'ml-2 font-medium text-red-600';
      }
      if (document.getElementById('product-seller')) {
        // Enhanced seller display with rating if available
        let sellerText = product.seller_info ? product.seller_info.name : (product.seller_name || 'Unknown Seller');
        if (product.seller_info && product.seller_info.rating > 0) {
          sellerText += ` (${product.seller_info.rating}â­)`;
        }
        document.getElementById('product-seller').textContent = sellerText;
      }
      if (document.getElementById('product-moq')) {
        document.getElementById('product-moq').textContent = product.min_order_quantity || '1';
      }
      if (document.getElementById('product-category-name')) {
        let categoryText = product.category_info ? product.category_info.name : (product.category_name || 'Uncategorized');
        if (product.category_info && product.category_info.parent_category) {
          categoryText = `${product.category_info.parent_category} > ${categoryText}`;
        }
        document.getElementById('product-category-name').textContent = categoryText;
      }

      // Update enhanced product information sections
      updateEnhancedProductInfo(product);

      // Update images
      const mainImageEl = document.getElementById('main-product-image');
      if (mainImageEl && product.main_image) {
        // Fix the image URL to use proper server path
        mainImageEl.src = 'http://localhost:3001/uploads/' + product.main_image;
        mainImageEl.onerror = function() {
          this.src = '/public/images/placeholder-product.jpg';
        };
      } else if (mainImageEl) {
        mainImageEl.src = '/public/images/placeholder-product.jpg';
      }

      // Set price for currency conversion - Use buyer-facing price (display_price or price), NOT base_price
      currentProduct.price = product.display_price || product.price || 0;
      currentProduct.currency = product.currency || 'RWF'; // Use product currency or RWF as default
      
      console.log(`ðŸ’° Price Display Debug:
        - Base Price (Seller): ${product.base_price || 'N/A'}
        - Display Price (Buyer): ${product.display_price || 'N/A'} 
        - Final Price Used: ${currentProduct.price}
        - Commission Included: ${product.commission_included ? 'Yes' : 'No'}`);

      updateCurrencyDisplay();
    }

    // Currency display function - uses buyer-facing price
    function updateCurrencyDisplay() {
      const priceEl = document.getElementById('product-price');
      const currencyEl = document.getElementById('product-currency');
      
      // Check if product data is available before accessing properties
      if (!priceEl || !currentProduct || !currentProduct.price) {
        console.log('âš ï¸ Currency update skipped - missing product data or price element');
        return;
      }
      
      const selectedCurrency = document.getElementById('currency-switcher')?.value || 'RWF';
      const currencySymbols = { USD: '$', RWF: 'FRw', EUR: 'â‚¬', KES: 'Ksh', NGN: 'â‚¦' };
      
      console.log('ðŸ’° CURRENCY CONVERSION DEBUG:', {
        stored_price: currentProduct.price,
        original_currency: currentProduct.currency,
        selected_currency: selectedCurrency,
        rates_available: !!currencyRates
      });
      
      // Use the same logic as buyer version for consistency
      let displayPrice = currentProduct.price;
      const originalCurrency = currentProduct.currency || 'RWF';
      
      // Convert currency if needed and rates are available
      if (selectedCurrency !== originalCurrency && currencyRates && currencyRates[selectedCurrency] && currencyRates[originalCurrency]) {
        displayPrice = (currentProduct.price / currencyRates[originalCurrency]) * currencyRates[selectedCurrency];
        
        console.log('ðŸ”„ CURRENCY CONVERSION APPLIED:', {
          original_price: currentProduct.price,
          from_rate: currencyRates[originalCurrency],
          to_rate: currencyRates[selectedCurrency],
          converted_price: displayPrice
        });
      }
      
      // Format price using the same approach as buyer version
      const symbol = currencySymbols[selectedCurrency] || selectedCurrency;
      const formattedPrice = `${symbol} ${displayPrice.toFixed(2)}`;
      
      priceEl.textContent = formattedPrice;
      console.log('âœ… PRICE DISPLAYED:', formattedPrice);
      
      console.log(`ðŸ’° Price Updated: ${priceEl.textContent} (Original: ${currentProduct.price} ${currentProduct.currency})`);
    }

    // Enhanced product information display
    function updateEnhancedProductInfo(product) {
      // Update gallery images
      updateGalleryImages(product.gallery_images || []);
      
      // Update product features if available
      updateProductFeatures(product.features);
      
      // Update specifications
      updateProductSpecifications(product.specifications_text, product.specifications);
      
      // Update additional product details
      updateAdditionalDetails(product);
      
      // Update reviews section
      updateReviewsSection(product.reviews || {});
      
      // Update related products
      updateRelatedProducts(product.related_products || []);
      
      // Update product metadata
      updateProductMetadata(product.meta || {});
      
      console.log('âœ… Enhanced product information updated successfully');
    }

    function updateGalleryImages(galleryImages) {
      const galleryContainer = document.getElementById('image-gallery');
      if (galleryContainer && galleryImages.length > 0) {
        galleryContainer.innerHTML = galleryImages.map((image, index) => 
          `<img src="http://localhost:3001/uploads/${image}" 
                alt="Product Image ${index + 1}" 
                class="w-20 h-20 object-cover rounded-lg cursor-pointer hover:opacity-75 transition-opacity"
                onclick="document.getElementById('main-product-image').src = this.src">`
        ).join('');
      } else if (galleryContainer) {
        galleryContainer.innerHTML = '<p class="text-gray-500 text-sm">No additional images available</p>';
      }
    }

    function updateProductFeatures(features) {
      if (!features) return;
      
      // Look for a features section in the HTML or create one dynamically
      const featuresSection = document.getElementById('product-features-section') || createFeaturesSection();
      if (featuresSection) {
        featuresSection.innerHTML = `
          <h3 class="font-semibold text-gray-900 mb-3">Key Features</h3>
          <div class="prose text-gray-700">
            ${features.split('\n').map(feature => feature.trim() ? `<p>â€¢ ${feature}</p>` : '').join('')}
          </div>
        `;
      }
    }

    function updateProductSpecifications(specificationsText, specificationsJson) {
      const specificationsSection = document.getElementById('product-specifications-section') || createSpecificationsSection();
      if (!specificationsSection) return;
      
      let content = '';
      
      if (specificationsJson && typeof specificationsJson === 'object') {
        content = '<h3 class="font-semibold text-gray-900 mb-3">Specifications</h3><div class="grid grid-cols-2 gap-3 text-sm">';
        Object.entries(specificationsJson).forEach(([key, value]) => {
          content += `
            <div>
              <span class="text-gray-600">${key}:</span>
              <span class="ml-2 font-medium">${value}</span>
            </div>
          `;
        });
        content += '</div>';
      } else if (specificationsText) {
        content = `
          <h3 class="font-semibold text-gray-900 mb-3">Specifications</h3>
          <div class="prose text-gray-700">
            ${specificationsText.split('\n').map(spec => spec.trim() ? `<p>${spec}</p>` : '').join('')}
          </div>
        `;
      }
      
      if (content) {
        specificationsSection.innerHTML = content;
        specificationsSection.style.display = 'block';
      }
    }

    function updateAdditionalDetails(product) {
      const additionalDetails = [
        { label: "What's Included", value: product.whats_included, id: 'whats-included' },
        { label: "Usage Instructions", value: product.usage_instructions, id: 'usage-instructions' },
        { label: "Warranty Period", value: product.warranty_period, id: 'warranty-info' },
        { label: "Return Policy", value: product.return_policy, id: 'return-policy' }
      ];
      
      additionalDetails.forEach(detail => {
        if (detail.value) {
          const section = document.getElementById(`${detail.id}-section`) || createDetailSection(detail.id, detail.label);
          if (section) {
            section.innerHTML = `
              <h3 class="font-semibold text-gray-900 mb-3">${detail.label}</h3>
              <div class="prose text-gray-700">
                <p>${detail.value}</p>
              </div>
            `;
            section.style.display = 'block';
          }
        }
      });
    }

    function updateReviewsSection(reviews) {
      const avgRatingEl = document.getElementById('average-rating');
      const ratingCountEl = document.getElementById('rating-count');
      
      if (avgRatingEl && reviews.stats) {
        avgRatingEl.textContent = (reviews.stats.average_rating || 0).toFixed(1);
      }
      
      if (ratingCountEl && reviews.stats) {
        const count = reviews.stats.total_reviews || 0;
        ratingCountEl.textContent = `${count} review${count !== 1 ? 's' : ''}`;
      }
      
      // Update star display
      updateStarDisplay(reviews.stats?.average_rating || 0);
    }

    function updateRelatedProducts(relatedProducts) {
      const relatedContainer = document.getElementById('related-products');
      if (!relatedContainer || relatedProducts.length === 0) return;
      
      relatedContainer.innerHTML = relatedProducts.map(relatedProduct => `
        <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
          <img src="http://localhost:3001/uploads/${relatedProduct.main_image}" 
               alt="${relatedProduct.name}" 
               class="w-full h-48 object-cover"
               onerror="this.src='/public/images/placeholder-product.jpg'">
          <div class="p-4">
            <h4 class="font-semibold text-gray-900 mb-2 line-clamp-2">${relatedProduct.name}</h4>
            <p class="text-lg font-bold text-[#0e2038] mb-2">${formatPrice(relatedProduct.display_price || relatedProduct.price)}</p>
            <p class="text-sm text-gray-600 mb-3">by ${relatedProduct.seller_name}</p>
            <a href="/public/product-detail.html?id=${relatedProduct.id}" 
               class="block w-full bg-blue-600 text-white text-center py-2 rounded-lg hover:bg-blue-700 transition-colors">
              View Details
            </a>
          </div>
        </div>
      `).join('');
    }

    function updateProductMetadata(meta) {
      if (meta.view_count > 0) {
        // Add view count display somewhere visible
        const breadcrumb = document.querySelector('nav ol');
        if (breadcrumb && !document.getElementById('view-count')) {
          const viewCountEl = document.createElement('li');
          viewCountEl.id = 'view-count';
          viewCountEl.className = 'text-sm text-gray-500';
          viewCountEl.innerHTML = `<span class="mx-2">â€¢</span> ${meta.view_count} views`;
          breadcrumb.appendChild(viewCountEl);
        }
      }
      
      // Add badges for featured/boosted products
      if (meta.is_featured || meta.is_boosted || meta.is_sponsored) {
        addProductBadges(meta);
      }
    }

    // Helper functions to create sections if they don't exist
    function createFeaturesSection() {
      const container = document.querySelector('.lg\\:w-1\\/2:last-child') || document.querySelector('main .max-w-7xl > div');
      if (!container) return null;
      
      const section = document.createElement('div');
      section.id = 'product-features-section';
      section.className = 'bg-white rounded-xl shadow-lg p-6 mb-6';
      container.appendChild(section);
      return section;
    }

    function createSpecificationsSection() {
      const container = document.querySelector('.lg\\:w-1\\/2:last-child') || document.querySelector('main .max-w-7xl > div');
      if (!container) return null;
      
      const section = document.createElement('div');
      section.id = 'product-specifications-section';
      section.className = 'bg-white rounded-xl shadow-lg p-6 mb-6';
      section.style.display = 'none';
      container.appendChild(section);
      return section;
    }

    function createDetailSection(id, label) {
      const container = document.querySelector('.lg\\:w-1\\/2:last-child') || document.querySelector('main .max-w-7xl > div');
      if (!container) return null;
      
      const section = document.createElement('div');
      section.id = `${id}-section`;
      section.className = 'bg-white rounded-xl shadow-lg p-6 mb-6';
      section.style.display = 'none';
      container.appendChild(section);
      return section;
    }

    function updateStarDisplay(rating) {
      const starsContainer = document.getElementById('rating-stars');
      if (!starsContainer) return;
      
      const fullStars = Math.floor(rating);
      const hasHalfStar = rating % 1 >= 0.5;
      
      let starsHTML = '';
      for (let i = 0; i < 5; i++) {
        if (i < fullStars) {
          starsHTML += '<span class="text-yellow-400">â˜…</span>';
        } else if (i === fullStars && hasHalfStar) {
          starsHTML += '<span class="text-yellow-400">â˜†</span>';
        } else {
          starsHTML += '<span class="text-gray-300">â˜†</span>';
        }
      }
      starsContainer.innerHTML = starsHTML;
    }

    function addProductBadges(meta) {
      const titleEl = document.getElementById('product-title');
      if (!titleEl || titleEl.querySelector('.product-badges')) return;
      
      const badges = [];
      if (meta.is_featured) badges.push('<span class="bg-yellow-500 text-white text-xs px-2 py-1 rounded-full">Featured</span>');
      if (meta.is_boosted) badges.push('<span class="bg-green-500 text-white text-xs px-2 py-1 rounded-full">Boosted</span>');
      if (meta.is_sponsored) badges.push('<span class="bg-purple-500 text-white text-xs px-2 py-1 rounded-full">Sponsored</span>');
      
      if (badges.length > 0) {
        const badgeContainer = document.createElement('div');
        badgeContainer.className = 'product-badges mt-2 space-x-2';
        badgeContainer.innerHTML = badges.join(' ');
        titleEl.appendChild(badgeContainer);
      }
    }

    function formatPrice(price) {
      return new Intl.NumberFormat('en-RW', {
        style: 'currency',
        currency: 'RWF',
        minimumFractionDigits: 0
      }).format(price);
    }

    // Currency conversion
    async function fetchCurrencyRates() {
      try {
        const response = await fetch('https://v6.exchangerate-api.com/v6/c5f524e323378439dad2a43f/latest/USD');
        if (!response.ok) {
          throw new Error('HTTP ' + response.status + ': ' + response.statusText);
        }
        const data = await response.json();
        if (data && data.result === 'success') {
          currencyRates = data.conversion_rates;
          localStorage.setItem('currencyRates', JSON.stringify(currencyRates));
          updateCurrencyDisplay();
        }
      } catch (error) {
        console.error('Error fetching currency rates:', error);
        // Fallback rates
        currencyRates = { USD: 1, RWF: 1200, EUR: 0.9, KES: 130, NGN: 1500 };
        updateCurrencyDisplay();
      }
    }



    // Notification system
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ${
        type === 'success' ? 'bg-green-500 text-white' :
        type === 'error' ? 'bg-red-500 text-white' :
        type === 'warning' ? 'bg-yellow-500 text-black' :
        'bg-blue-500 text-white'
      }`;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.opacity = '0';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    // Error display function
    function showError(message) {
      showNotification(message, 'error');
      
      // Also hide loading and show error state
      const loadingEl = document.getElementById('loading-state');
      const contentEl = document.getElementById('product-content');
      
      if (loadingEl) {
        loadingEl.innerHTML = 
          '<div class="text-center py-12">' +
            '<div class="text-red-500 text-6xl mb-4">âš ï¸</div>' +
            '<h2 class="text-2xl font-bold text-gray-900 mb-2">Product Not Found</h2>' +
            '<p class="text-gray-600 mb-4">' + message + '</p>' +
            '<button onclick="history.back()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">' +
              'Go Back' +
            '</button>' +
          '</div>';
      }
    }

    // Generic search handlers
    function handleProductSearch(query) {
      console.log('Searching products:', query);
      if (query.length > 2) {
        showNotification('Searching for: ' + query, 'info');
      }
    }

    function handleSellerSearch(query) {
      console.log('Searching sellers:', query);
      if (query.length > 2) {
        showNotification('Searching sellers: ' + query, 'info');
      }
    }

    function handleAgentSearch(query) {
      console.log('Searching agents:', query);
      if (query.length > 2) {
        showNotification('Searching agents: ' + query, 'info');
      }
    }

    function handleOrderSearch(query) {
      console.log('Searching orders:', query);
      if (query.length > 2) {
        showNotification('Searching orders: ' + query, 'info');
      }
    }

    function handleUserSearch(query) {
      console.log('Searching users:', query);
      if (query.length > 2) {
        showNotification('Searching users: ' + query, 'info');
      }
    }

    // Generic form handlers
    function handleSave() {
      showNotification('Save functionality will be implemented soon', 'info');
    }

    function handleEdit() {
      showNotification('Edit functionality will be implemented soon', 'info');
    }

    function handleDelete() {
      if (confirm('Are you sure you want to delete this item?')) {
        showNotification('Delete functionality will be implemented soon', 'info');
      }
    }

    function handleCancel() {
      if (confirm('Are you sure you want to cancel? Unsaved changes will be lost.')) {
        history.back();
      }
    }

    // --- SHARE FUNCTIONALITY ---
    function shareCurrentProduct() {
      if (currentProduct) {
        shareProduct(currentProduct);
      } else {
        // Create a product object from current page data
        const product = {
          id: new URLSearchParams(window.location.search).get('id') || '1',
          name: document.getElementById('product-title').textContent || 'Amazing Product',
          price: document.getElementById('product-price').textContent || '$99.99',
          description: document.getElementById('product-description').textContent || 'Great product description',
          category: document.getElementById('product-category-name').textContent || 'Electronics',
          image: document.getElementById('main-product-image').src
        };
        shareProduct(product);
      }
    }

    function shareProduct(product) {
      // Create and show share modal
      const modal = document.createElement('div');
      modal.id = 'share-modal';
      modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
      modal.innerHTML = `
        <div class="bg-white rounded-2xl shadow-xl p-6 max-w-md mx-4">
          <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-bold text-gray-900">Share Product</h3>
            <button onclick="closeShareModal()" class="text-gray-400 hover:text-gray-600">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          
          <div class="mb-6">
            <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
              <img src="${product.image}" alt="${product.name}" class="w-12 h-12 object-cover rounded-lg">
              <div>
                <h4 class="font-medium text-gray-900">${product.name}</h4>
                <p class="text-sm text-gray-600">${product.price}</p>
              </div>
            </div>
          </div>
          
          <div class="space-y-3">
            <button onclick="shareToWhatsApp('${product.id}', '${product.name}', '${product.price}', '${product.description}', '${product.category}')" class="w-full flex items-center justify-center space-x-3 p-4 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
              <svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.785"/>
              </svg>
              <span>Share on WhatsApp</span>
            </button>
            
            <button onclick="shareToFacebook('${product.name}', '${product.price}')" class="w-full flex items-center justify-center space-x-3 p-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
              <span>Share on Facebook</span>
            </button>
            
            <button onclick="shareToTwitter('${product.name}', '${product.price}')" class="w-full flex items-center justify-center space-x-3 p-4 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
              </svg>
              <span>Share on Twitter</span>
            </button>
            
            <button onclick="copyProductLink()" class="w-full flex items-center justify-center space-x-3 p-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
              </svg>
              <span>Copy Link</span>
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
    }

    function closeShareModal() {
      const modal = document.getElementById('share-modal');
      if (modal) {
        modal.remove();
      }
    }

    function shareToWhatsApp(productId, productName, productPrice, productDescription, productCategory) {
      const productUrl = `${window.location.origin}/public/product-detail.html?id=${productId}`;
      const message = `ðŸ›ï¸ *${productName}*

ðŸ“ ${productDescription}

ðŸ’° *Price:* ${productPrice}
ðŸ·ï¸ *Category:* ${productCategory}

ðŸŒ Available on African Deals Domain - Africa's Premier E-Commerce Platform

ðŸ”— View Details: ${productUrl}

#AfricanDeals #Shopping #${productCategory.replace(/\s+/g, '')}`;

      const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
      window.open(whatsappUrl, '_blank');
      closeShareModal();
    }

    function shareToFacebook(productName, productPrice) {
      const productUrl = `${window.location.origin}${window.location.pathname}${window.location.search}`;
      const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(productUrl)}&quote=${encodeURIComponent(`Check out ${productName} for ${productPrice} on African Deals Domain!`)}`;
      window.open(facebookUrl, '_blank');
      closeShareModal();
    }

    function shareToTwitter(productName, productPrice) {
      const productUrl = `${window.location.origin}${window.location.pathname}${window.location.search}`;
      const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(`Amazing deal: ${productName} for ${productPrice}! Check it out on African Deals Domain`)}&url=${encodeURIComponent(productUrl)}&hashtags=AfricanDeals,Shopping,Deals`;
      window.open(twitterUrl, '_blank');
      closeShareModal();
    }

    function copyProductLink() {
      const productUrl = `${window.location.origin}${window.location.pathname}${window.location.search}`;
      const textArea = document.createElement('textarea');
      textArea.value = productUrl;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand('copy');
      document.body.removeChild(textArea);
      
      showNotification('Product link copied to clipboard!', 'success');
      closeShareModal();
    }

    // --- CATEGORIES FUNCTIONALITY ---
    async function loadCategories() {
      try {
        const response = await fetch('http://localhost:3001/api/categories');
        if (!response.ok) {
          throw new Error('HTTP ' + response.status + ': ' + response.statusText);
        }
        
        const data = await response.json();
        console.log('Categories API Response:', data); // Debug log
        
        const categories = data.success ? data.categories || [] : [];
        console.log('Loaded categories:', categories.length); // Debug log
        
        const categoriesList = document.getElementById('categories-list');
        if (!categoriesList) {
          console.warn('Categories list element not found');
          return;
        }
        
        categoriesList.innerHTML = '';
        
        categories.forEach(category => {
          const categoryItem = document.createElement('div');
          categoryItem.className = 'category-item';
          categoryItem.innerHTML = `
            <div class="flex items-center space-x-3">
              <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                <span class="text-blue-600 text-sm font-medium">${category.name.charAt(0)}</span>
              </div>
              <div>
                <h4 class="font-medium text-gray-900">${category.name}</h4>
                <p class="text-sm text-gray-500">${category.products_count || 0} products</p>
              </div>
            </div>
          `;
          
          categoryItem.addEventListener('click', () => {
            window.location.href = `/public/products.html?category=${category.id}`;
          });
          
          categoriesList.appendChild(categoryItem);
        });
      } catch (error) {
        console.error('Error loading categories:', error);
        // Show fallback categories
        const categoriesList = document.getElementById('categories-list');
        categoriesList.innerHTML = `
          <div class="category-item" onclick="window.location.href='/public/products.html?category=electronics'">
            <div class="flex items-center space-x-3">
              <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                <span class="text-blue-600 text-sm font-medium">E</span>
              </div>
              <div>
                <h4 class="font-medium text-gray-900">Electronics</h4>
                <p class="text-sm text-gray-500">125 products</p>
              </div>
            </div>
          </div>
          <div class="category-item" onclick="window.location.href='/public/products.html?category=fashion'">
            <div class="flex items-center space-x-3">
              <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                <span class="text-purple-600 text-sm font-medium">F</span>
              </div>
              <div>
                <h4 class="font-medium text-gray-900">Fashion</h4>
                <p class="text-sm text-gray-500">89 products</p>
              </div>
            </div>
          </div>
          <div class="category-item" onclick="window.location.href='/public/products.html?category=home'">
            <div class="flex items-center space-x-3">
              <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                <span class="text-green-600 text-sm font-medium">H</span>
              </div>
              <div>
                <h4 class="font-medium text-gray-900">Home & Living</h4>
                <p class="text-sm text-gray-500">67 products</p>
              </div>
            </div>
          </div>
        `;
      }
    }

    // --- CONTACT & WHATSAPP FUNCTIONALITY ---
    function openContactModal() {
      const modal = document.getElementById('contact-modal');
      if (modal) {
        modal.style.display = 'flex';
      }
    }

    function closeContactModal() {
      const modal = document.getElementById('contact-modal');
      if (modal) {
        modal.style.display = 'none';
      }
    }

    function openWhatsApp() {
      const message = encodeURIComponent("Hello! I'm interested in this product on African Deals Domain. Can you help me with more information?");
      const whatsappUrl = `https://wa.me/250788910639?text=${message}`;
      window.open(whatsappUrl, '_blank');
      closeContactModal();
    }

    function callSeller() {
      window.location.href = 'tel:+250788910639';
      closeContactModal();
    }

    // --- DYNAMIC FLOATING MESSAGES FUNCTIONALITY ---
    let currentMessageIndex = 0;
    let messageTimer;
    let isMessageVisible = false;
    let messageTimeoutId;

    const welcomeMessages = [
      {
        text: "ðŸ‘‹ Hi there! Welcome to African Deals Domain!",
        icon: "ðŸ‘‹"
      },
      {
        text: "ðŸ›ï¸ Looking for something specific? I'm here to help!",
        icon: "ðŸ›ï¸"
      },
      {
        text: "ðŸ’¬ Need assistance with your shopping? Chat with us!",
        icon: "ðŸ’¬"
      },
      {
        text: "ðŸŽ¯ Found the perfect deal? Let me know if you need help!",
        icon: "ðŸŽ¯"
      },
      {
        text: "ðŸ“ž Have questions? Click here for instant support!",
        icon: "ðŸ“ž"
      },
      {
        text: "âœ¨ Explore thousands of products from African sellers!",
        icon: "âœ¨"
      },
      {
        text: "ðŸš€ Fast delivery and great prices await you!",
        icon: "ðŸš€"
      },
      {
        text: "ðŸ’ Special deals just for you! Ask me about them!",
        icon: "ðŸ’"
      }
    ];

    function createFloatingMessage(message) {
      const container = document.getElementById('floating-messages-container');
      const messageDiv = document.createElement('div');
      messageDiv.className = 'floating-message';
      messageDiv.innerHTML = `
        <div class="message-close" onclick="hideFloatingMessage()">&times;</div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <span style="font-size: 16px;">${message.icon}</span>
          <span>${message.text}</span>
        </div>
      `;

      // Add click handler to open contact modal
      messageDiv.addEventListener('click', function(e) {
        if (!e.target.classList.contains('message-close')) {
          hideFloatingMessage();
          openContactModal();
        }
      });

      container.appendChild(messageDiv);

      // Show with animation
      setTimeout(() => {
        messageDiv.classList.add('show');
        isMessageVisible = true;
      }, 100);

      return messageDiv;
    }

    function showNextMessage() {
      if (isMessageVisible) return;

      const message = welcomeMessages[currentMessageIndex];
      const messageElement = createFloatingMessage(message);

      // Show message indicator when message appears
      showMessageIndicator();

      // Auto hide after 6 seconds
      messageTimeoutId = setTimeout(() => {
        if (messageElement && messageElement.parentNode) {
          hideFloatingMessage();
        }
      }, 6000);

      currentMessageIndex = (currentMessageIndex + 1) % welcomeMessages.length;
    }

    function hideFloatingMessage() {
      const container = document.getElementById('floating-messages-container');
      const activeMessage = container.querySelector('.floating-message.show');
      
      if (activeMessage) {
        activeMessage.classList.remove('show');
        activeMessage.classList.add('hide');
        
        setTimeout(() => {
          if (activeMessage.parentNode) {
            activeMessage.parentNode.removeChild(activeMessage);
          }
          isMessageVisible = false;
        }, 400);

        // Clear timeout if message is manually closed
        if (messageTimeoutId) {
          clearTimeout(messageTimeoutId);
          messageTimeoutId = null;
        }
      }
    }

    function hideMessageIndicator() {
      const indicator = document.getElementById('message-indicator');
      if (indicator) {
        indicator.style.display = 'none';
      }
    }

    function showMessageIndicator() {
      const indicator = document.getElementById('message-indicator');
      if (indicator) {
        indicator.style.display = 'block';
      }
    }

    function startFloatingMessages() {
      // Show first message after 3 seconds
      setTimeout(() => {
        showNextMessage();
      }, 3000);

      // Then show messages every 10 seconds
      messageTimer = setInterval(() => {
        showNextMessage();
      }, 10000);
    }

    function enhancedOpenContactModal() {
      hideFloatingMessage();
      hideMessageIndicator();
      openContactModal();
    }

    // Initialize everything when page loads
    document.addEventListener('DOMContentLoaded', function() {
      loadCategories();
      startFloatingMessages();
      
      // Contact modal click outside to close
      const contactModal = document.getElementById('contact-modal');
      if (contactModal) {
        contactModal.addEventListener('click', function(e) {
          if (e.target === contactModal) {
            closeContactModal();
          }
        });
      }
    });
  </script>

<!-- WhatsApp Floating Button -->
<div class="whatsapp-float" id="whatsapp-button" onclick="enhancedOpenContactModal()">
  <div class="message-indicator" id="message-indicator"></div>
  <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
    <path d="M26.6667 15.7333C26.6667 22.2667 21.5333 27.4 15 27.4C12.9333 27.4 10.9333 26.8 9.2 25.7333L4 27.4L5.66667 22.2C4.53333 20.4 4 18.3333 4 16C4 9.46667 9.13333 4.33334 15.6667 4.33334C22.2 4.33334 26.6667 9.2 26.6667 15.7333ZM15.6667 6.66667C10.4 6.66667 6.33333 10.7333 6.33333 16C6.33333 18 7.06667 19.8667 8.33333 21.3333L7.33333 24.6667L10.8 23.6667C12.2667 24.6667 13.9333 25.0667 15.6667 25.0667C20.9333 25.0667 25 21 25 15.7333C25 10.4667 20.9333 6.66667 15.6667 6.66667ZM21.3333 18.5333C21.3333 18.2667 21.0667 18.1333 20.6667 17.8667C20.2667 17.6 18.6667 16.8 18.2667 16.6667C17.8667 16.5333 17.6 16.4 17.3333 16.8C17.0667 17.2 16.5333 17.8667 16.2667 18.1333C16 18.4 15.7333 18.4 15.3333 18.1333C14.9333 17.8667 13.6 17.4667 12.0667 16.1333C10.8 15 10 13.6 9.73333 13.2C9.46667 12.8 9.73333 12.5333 10 12.2667C10.2667 12 10.5333 11.6 10.8 11.3333C11.0667 11.0667 11.2 10.8 11.3333 10.5333C11.4667 10.2667 11.4 10 11.2 9.73334C11 9.46667 10.2667 7.86667 9.86667 7.06667C9.46667 6.26667 9.06667 6.4 8.8 6.4C8.53333 6.4 8.26667 6.4 8 6.4C7.73333 6.4 7.33333 6.53334 6.93333 6.93334C6.53333 7.33334 5.73333 8.13334 5.73333 9.73334C5.73333 11.3333 6.93333 12.8667 7.2 13.1333C7.46667 13.4 10.0667 17.2 14 18.9333C15.0667 19.3333 15.8667 19.5333 16.5333 19.6667C17.6 20 18.5333 19.9333 19.2667 19.8C20.0667 19.6667 21.3333 18.9333 21.6 18.1333C21.8667 17.3333 21.8667 16.6667 21.7333 16.5333C21.6 16.4 21.3333 16.2667 21.3333 18.5333Z" fill="white"/>
  </svg>
</div>

<!-- Dynamic Floating Messages Container -->
<div id="floating-messages-container"></div>

<!-- Contact Modal -->
<div id="contact-modal" class="contact-modal">
  <div class="contact-modal-content">
    <div class="text-center">
      <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="white">
          <path d="M26.6667 15.7333C26.6667 22.2667 21.5333 27.4 15 27.4C12.9333 27.4 10.9333 26.8 9.2 25.7333L4 27.4L5.66667 22.2C4.53333 20.4 4 18.3333 4 16C4 9.46667 9.13333 4.33334 15.6667 4.33334C22.2 4.33334 26.6667 9.2 26.6667 15.7333Z"/>
        </svg>
      </div>
      <h3 class="text-2xl font-bold text-gray-900 mb-2">Contact Us</h3>
      <p class="text-gray-600 mb-6">Choose how you'd like to get in touch with us</p>
      <div class="space-y-3">
        <button onclick="openWhatsApp()" class="w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2">
          <svg width="20" height="20" viewBox="0 0 32 32" fill="currentColor">
            <path d="M26.6667 15.7333C26.6667 22.2667 21.5333 27.4 15 27.4C12.9333 27.4 10.9333 26.8 9.2 25.7333L4 27.4L5.66667 22.2C4.53333 20.4 4 18.3333 4 16C4 9.46667 9.13333 4.33334 15.6667 4.33334C22.2 4.33334 26.6667 9.2 26.6667 15.7333Z"/>
          </svg>
          WhatsApp Chat
        </button>
        <button onclick="callSeller()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
          </svg>
          Phone Call
        </button>
      </div>
      <button onclick="closeContactModal()" class="mt-4 text-gray-500 hover:text-gray-700 transition-colors">Close</button>
    </div>
  </div>
</div>

</body>
</html>